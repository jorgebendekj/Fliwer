!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirecbf3,i=n.register;i("2qYQe",(function(i,r){t(i.exports,"UFOExperience",(function(){return E}));var a=n("eVDe4"),s=n("uqRmf"),u=n("3BD5g"),c=n("ck3YL"),o=n("lH0U2");function l(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,r=e(o)(t);if(n){var a=e(o)(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return e(c)(this,i)}}var E=function(t){e(u)(i,t);var n=l(i);function i(){return e(s)(this,i),n.apply(this,arguments)}return e(a)(i)}(n("ecojU").UFOAbstractExperience)})),i("ecojU",(function(i,r){t(i.exports,"UFOAbstractExperience",(function(){return R}));var a=n("b4Ivn"),s=n("4mVfk"),u=n("uqRmf"),c=n("eVDe4"),o=n("kFnE9"),l=n("8DpVo"),E=n("5m0MG"),p=n("149Ka"),f=n("63str"),h=n("kMk05"),d=n("eU7IC"),S=n("cknGl"),O=n("cp4Pw"),b=n("bgvOk"),v=n("ltpJj"),m=n("am5yG"),D=n("jNZm0");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?x(Object(i),!0).forEach((function(n){e(o)(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var y=function(){return(0,f.isWindowObjectAvailable)()&&window.document&&"visible"!==window.document.visibilityState?O.PageVisibleState.HIDDEN:O.PageVisibleState.VISIBLE},T=function(e){return void 0!==e?~~e:(0,b.roundPerfNow)()},R=function(){function t(n,i){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(u)(this,t),e(o)(this,"state",v.UFOExperienceState.NOT_STARTED),e(o)(this,"instanceId",null),e(o)(this,"parent",null),e(o)(this,"category",null),e(o)(this,"metadata",{}),e(o)(this,"onDoneCallbacks",[]),e(o)(this,"childExperiences",[]),e(o)(this,"explicitTimings",{}),e(o)(this,"isSSROutputAsFMP",!1),e(o)(this,"uuid",null),e(o)(this,"_until",null),e(o)(this,"metrics",{startTime:null,endTime:null,marks:[]}),e(o)(this,"performanceConfig",{}),e(o)(this,"setPageVisibleStateToMixed",(function(){r.pageVisibleState=O.PageVisibleState.MIXED,S.visibilityChangeObserver.unsubscribe(r.setPageVisibleStateToMixed)})),this.id=n,this.category=(null==i?void 0:i.category)||null,this.until=(null==i?void 0:i.until)||null,this.instanceId=a,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=i.type,this.performanceType=i.performanceType,this.performanceConfig=i.performanceConfig||{},this.config=i,this.pageVisibleState=y(),this.featureFlags=i.featureFlags||[],this.timings=i.timings||[],i.performanceType!==D.ExperiencePerformanceTypes.PageLoad&&i.performanceType!==D.ExperiencePerformanceTypes.PageSegmentLoad||(this.isSSROutputAsFMP=i.isSSROutputAsFMP||!1)}var n,i,r,f,b,x,R;return e(c)(t,[{key:"transition",value:(R=e(s)(e(l).mark((function t(n,i){var r;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,d.ufolog)("async transition",this.id,this.state.id,n.id),!(0,m.canTransition)(this.state,n)){e.next=15;break}if((0,d.ufolog)("TRANSITION: ".concat(this.id," from ").concat(this.state.id," to ").concat(n.id," successful"),this.state.final,!n.final),n===v.UFOExperienceState.STARTED&&this._reset(),this.state.final&&!n.final&&(this.metrics.startTime=T(i),this.uuid=(0,E.v4)()),this.state=n,!n.final){e.next=14;break}return this.metrics.endTime=T(i),this._isManualStateEnabled()||(0,h.getGlobalEventStream)().push((0,h.unsubscribeEvent)(O.SUBSCRIBE_ALL,this.handleDoneBind)),e.next=11,this.exportData();case 11:r=e.sent,(0,d.ufolog)("this.parent",this.parent),(0,h.getGlobalEventStream)().push((0,h.experiencePayloadEvent)(r));case 14:return e.abrupt("return",!0);case 15:return(0,d.ufolog)("TRANSITION: ".concat(this.id," from ").concat(this.state.id," to ").concat(n.id," unsuccessful")),(0,d.ufowarn)("transition of ".concat(this.id," from ").concat(this.state," to ").concat(n," is not possible")),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),t,this)}))),function(e,t){return R.apply(this,arguments)})},{key:"start",value:(x=e(s)(e(l).mark((function t(n){return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transition(v.UFOExperienceState.STARTED,n);case 2:e.sent&&(this.pageVisibleState=y(),S.visibilityChangeObserver.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||((0,d.ufolog)("subscribed",this.id),(0,h.getGlobalEventStream)().push((0,h.subscribeEvent)(O.SUBSCRIBE_ALL,this.handleDoneBind))));case 4:case"end":return e.stop()}}),t,this)}))),function(e){return x.apply(this,arguments)})},{key:"mark",value:function(e,t){e!==O.FMP_MARK&&e!==O.INLINE_RESPONSE_MARK?this._mark(e,t):(0,d.ufowarn)("please use markFMP or markInlineResponse for specialised marks")}},{key:"_mark",value:function(e,t){this.metrics.marks.push({name:e,time:T(t)}),this.transition(v.UFOExperienceState.IN_PROGRESS)}},{key:"markFMP",value:function(e){this._mark(O.FMP_MARK,e)}},{key:"markInlineResponse",value:function(e){this._mark(O.INLINE_RESPONSE_MARK,e)}},{key:"_isManualStateEnabled",value:function(){return null===this.until}},{key:"_validateManualState",value:function(){return!!this._isManualStateEnabled()||((0,d.ufowarn)('manual change of state not allowed as "until" is defined'),!1)}},{key:"switchToEndState",value:function(e,t){return null!=t&&t.force||this._validateManualState()?(null!=t&&t.metadata&&this.addMetadata(t.metadata),S.visibilityChangeObserver.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}},{key:"success",value:(b=e(s)(e(l).mark((function t(n){return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.switchToEndState(v.UFOExperienceState.SUCCEEDED,n));case 1:case"end":return e.stop()}}),t,this)}))),function(e){return b.apply(this,arguments)})},{key:"failure",value:(f=e(s)(e(l).mark((function t(n){return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.switchToEndState(v.UFOExperienceState.FAILED,n));case 1:case"end":return e.stop()}}),t,this)}))),function(e){return f.apply(this,arguments)})},{key:"abort",value:(r=e(s)(e(l).mark((function t(n){return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.switchToEndState(v.UFOExperienceState.ABORTED,n));case 1:case"end":return e.stop()}}),t,this)}))),function(e){return r.apply(this,arguments)})},{key:"addMetadata",value:function(e){Object.assign(this.metadata,e)}},{key:"_handleDoneExperience",value:function(e){if((0,d.ufolog)("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){var t=this._until(e),n=t.done,i=t.state;n&&!this.state.final&&this.transition(i)}}},{key:"getId",value:(i=e(s)(e(l).mark((function t(){return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.id);case 1:case"end":return e.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"exportData",value:(n=e(s)(e(l).mark((function t(){return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getId();case 2:return t.t0=t.sent,t.t1=this.uuid,t.t2=this.type,t.t3=p.UFO_EXPERIMENTAL_BUILD_VERSION||"unknown",t.t4=this.performanceType,t.t5=this.category,t.t6=this.state,t.t7=_({},this.metadata),t.t8=_({},this.metrics),t.t9=e(a)(this.childExperiences),t.t10={success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},t.t11=this.config.platform||null,t.t12=this.pageVisibleState,t.t13=this.featureFlags,t.t14=this.isSSROutputAsFMP,t.t15=this.timings,t.t16=this.explicitTimings,t.t17=this.performanceConfig,t.abrupt("return",{id:t.t0,uuid:t.t1,type:t.t2,schemaVersion:t.t3,performanceType:t.t4,category:t.t5,state:t.t6,metadata:t.t7,metrics:t.t8,children:t.t9,result:t.t10,platform:t.t11,pageVisibleState:t.t12,featureFlags:t.t13,isSSROutputAsFMP:t.t14,timings:t.t15,explicitTimings:t.t16,performanceConfig:t.t17});case 21:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_reset",value:function(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,endTime:null,marks:[]},this._until=this.until?this.until():null}}]),t}()})),i("149Ka",(function(e,n){t(e.exports,"UFO_EXPERIMENTAL_BUILD_VERSION",(function(){return i}));var i="0.1.5"})),i("63str",(function(e,n){t(e.exports,"isWindowObjectAvailable",(function(){return i}));var i=function(){return"undefined"!=typeof window}})),i("kMk05",(function(e,i){t(e.exports,"getGlobalEventStream",(function(){return a})),t(e.exports,"subscribeEvent",(function(){return s})),t(e.exports,"unsubscribeEvent",(function(){return u})),t(e.exports,"experiencePayloadEvent",(function(){return c}));n("eU7IC");var r=n("cp4Pw"),a=function(){if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){var e=(t=[],{__buffer_only__:!0,push:function(e){t.length<250&&t.push(e)},getStream:function(){return t}});globalThis.__UFO_GLOBAL_EVENT_STREAM__=e}var t;return globalThis.__UFO_GLOBAL_EVENT_STREAM__},s=function(e,t){return{type:r.UFOGlobalEventStreamEventType.SUBSCRIBE,payload:{experienceId:e,callback:t}}},u=function(e,t){return{type:r.UFOGlobalEventStreamEventType.UNSUBSCRIBE,payload:{experienceId:e,callback:t}}},c=function(e){return{type:r.UFOGlobalEventStreamEventType.EXPERIENCE_PAYLOAD,payload:e}}})),i("eU7IC",(function(i,r){t(i.exports,"ufolog",(function(){return l})),t(i.exports,"ufowarn",(function(){return E}));var a=n("uqRmf"),s=n("eVDe4"),u=n("kFnE9"),c=function(){function t(){e(a)(this,t),e(u)(this,"enabled",!1)}return e(s)(t,[{key:"log",value:function(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];this.enabled&&(e=console).log.apply(e,[t.UFOprefix].concat(i))}},{key:"warn",value:function(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];this.enabled&&(e=console).warn.apply(e,[t.UFOprefix].concat(i))}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}}]),t}();e(u)(c,"UFOprefix","[ufo\ud83d\udef8]");var o=new c,l=function(){o.log.apply(o,arguments)},E=function(){o.warn.apply(o,arguments)}})),i("cp4Pw",(function(e,n){t(e.exports,"UFOGlobalEventStreamEventType",(function(){return i})),t(e.exports,"PageVisibleState",(function(){return r})),t(e.exports,"SUBSCRIBE_ALL",(function(){return a})),t(e.exports,"FMP_MARK",(function(){return s})),t(e.exports,"INLINE_RESPONSE_MARK",(function(){return u}));var i=function(e){return e[e.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE",e}({}),r=function(e){return e.VISIBLE="visible",e.HIDDEN="hidden",e.MIXED="mixed",e}({}),a="__SUBSCRIBE_ALL__",s="fmp",u="inline-response"})),i("cknGl",(function(i,r){t(i.exports,"visibilityChangeObserver",(function(){return o}));var a=n("uqRmf"),s=n("eVDe4"),u=n("kFnE9"),c=n("63str"),o=new(function(){function t(){var n=this;e(a)(this,t),e(u)(this,"started",!1),e(u)(this,"observers",[]),e(u)(this,"broadcast",(function(){n.observers.forEach((function(e){return e()})),n.observers=[]}))}return e(s)(t,[{key:"start",value:function(){this.started||(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),(0,c.isWindowObjectAvailable)()&&window.addEventListener("pagehide",this.broadcast))}},{key:"subscribe",value:function(e){this.observers.push(e)}},{key:"unsubscribe",value:function(e){this.observers=this.observers.filter((function(t){return t!==e}))}}]),t}())})),i("bgvOk",(function(e,n){t(e.exports,"roundPerfNow",(function(){return i}));var i=function(){return~~performance.now()}})),i("ltpJj",(function(e,n){t(e.exports,"UFOExperienceState",(function(){return i}));var i={NOT_STARTED:{id:"NOT_STARTED",final:!0},STARTED:{id:"STARTED"},IN_PROGRESS:{id:"IN_PROGRESS"},BLOCKED:{id:"BLOCKED"},RECOVERED:{id:"RECOVERED"},SUCCEEDED:{id:"SUCCEEDED",final:!0,success:!0},SUCCEEDED_WAITING_FOR_DEPS:{id:"SUCCEEDED_WAITING_FOR_DEPS"},FAILED:{id:"FAILED",final:!0},ABORTED:{id:"ABORTED",final:!0}}})),i("am5yG",(function(i,r){t(i.exports,"canTransition",(function(){return o}));var a,s=n("kFnE9"),u=n("ltpJj"),c=(a={},e(s)(a,u.UFOExperienceState.NOT_STARTED.id,[u.UFOExperienceState.STARTED.id]),e(s)(a,u.UFOExperienceState.STARTED.id,[u.UFOExperienceState.IN_PROGRESS.id,u.UFOExperienceState.BLOCKED.id,u.UFOExperienceState.SUCCEEDED.id,u.UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,u.UFOExperienceState.FAILED.id,u.UFOExperienceState.ABORTED.id]),e(s)(a,u.UFOExperienceState.IN_PROGRESS.id,[u.UFOExperienceState.BLOCKED.id,u.UFOExperienceState.SUCCEEDED.id,u.UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,u.UFOExperienceState.FAILED.id,u.UFOExperienceState.ABORTED.id]),e(s)(a,u.UFOExperienceState.BLOCKED.id,[u.UFOExperienceState.RECOVERED.id,u.UFOExperienceState.ABORTED.id]),e(s)(a,u.UFOExperienceState.RECOVERED.id,[u.UFOExperienceState.STARTED.id,u.UFOExperienceState.SUCCEEDED.id,u.UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,u.UFOExperienceState.FAILED.id,u.UFOExperienceState.ABORTED.id]),e(s)(a,u.UFOExperienceState.SUCCEEDED.id,[u.UFOExperienceState.STARTED.id]),e(s)(a,u.UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,[u.UFOExperienceState.SUCCEEDED.id,u.UFOExperienceState.FAILED.id,u.UFOExperienceState.ABORTED.id]),e(s)(a,u.UFOExperienceState.FAILED.id,[u.UFOExperienceState.STARTED.id]),e(s)(a,u.UFOExperienceState.ABORTED.id,[u.UFOExperienceState.STARTED.id]),a),o=function(e,t){return c[e.id]&&c[e.id].includes(t.id)}}))}();
//# sourceMappingURL=atlassian-switcher.289fde92.js.map
