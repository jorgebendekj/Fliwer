!function(){function t(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function r(t){return t&&t.__esModule?t.default:t}var n=e.parcelRequirecbf3,o=n.register;o("gEhGF",(function(e,r){var o;t(e.exports,"Observable",(function(){return o}),(function(t){return o=t}));var i=n("3NgXI"),s=n("gq4dR"),u=n("1XotC"),c=n("7Rqov"),a=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=s.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?e=i.root.Rx.config.Promise:i.root.Promise&&(e=i.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,n){var o;o=r.subscribe((function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)}),n,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[u.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:c.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();o=a})),o("3NgXI",(function(r,n){var o;t(r.exports,"root",(function(){return o}),(function(t){return o=t}));var i="undefined"!=typeof window&&window,s="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,u=i||void 0!==e&&e||s;o=u,function(){if(!u)throw new Error("RxJS could not find any global context (window, self, global)")}()})),o("gq4dR",(function(e,r){var o;t(e.exports,"toSubscriber",(function(){return o}),(function(t){return o=t}));var i=n("2qwUA"),s=n("eZraz"),u=n("5MB8B");o=function(t,e,r){if(t){if(t instanceof i.Subscriber)return t;if(t[s.rxSubscriber])return t[s.rxSubscriber]()}return t||e||r?new i.Subscriber(t,e,r):new i.Subscriber(u.empty)}})),o("2qwUA",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("fSXL2"),i=n("lp7cl"),s=n("5MB8B"),u=n("eZraz"),c=function(t){function e(e,r,n){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!e){this.destination=s.empty;break}if("object"==typeof e){if((i=e)instanceof c||"syncErrorThrowable"in i&&i[u.rxSubscriber]){var o=e[u.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new a(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new a(this,e,r,n)}var i}return r(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(i.Subscription);t.exports.Subscriber=c;var a=function(t){function e(e,r,n,i){var u;t.call(this),this._parentSubscriber=e;var c=this;o.isFunction(r)?u=r:r&&(u=r.next,n=r.error,i=r.complete,r!==s.empty&&(c=Object.create(r),o.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=u,this._error=n,this._complete=i}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c)})),o("fSXL2",(function(e,r){var n;t(e.exports,"isFunction",(function(){return n}),(function(t){return n=t})),n=function(t){return"function"==typeof t}})),o("lp7cl",(function(e,r){var o;t(e.exports,"Subscription",(function(){return o}),(function(t){return o=t}));var i=n("5uTpE"),s=n("TbUu3"),u=n("fSXL2"),c=n("hRU26"),a=n("ihKv9"),l=n("a3TDn"),f=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this,n=r._parent,o=r._parents,f=r._unsubscribe,h=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,v=o?o.length:0;n;)n.remove(this),n=++d<v&&o[d]||null;if(u.isFunction(f))c.tryCatch(f).call(this)===a.errorObject&&(e=!0,t=t||(a.errorObject.e instanceof l.UnsubscriptionError?p(a.errorObject.e.errors):[a.errorObject.e]));if(i.isArray(h))for(d=-1,v=h.length;++d<v;){var b=h[d];if(s.isObject(b))if(c.tryCatch(b.unsubscribe).call(b)===a.errorObject){e=!0,t=t||[];var y=a.errorObject.e;y instanceof l.UnsubscriptionError?t=t.concat(p(y.errors)):t.push(y)}}if(e)throw new l.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function p(t){return t.reduce((function(t,e){return t.concat(e instanceof l.UnsubscriptionError?e.errors:e)}),[])}o=f})),o("5uTpE",(function(e,r){var n;t(e.exports,"isArray",(function(){return n}),(function(t){return n=t})),n=Array.isArray||function(t){return t&&"number"==typeof t.length}})),o("TbUu3",(function(e,r){var n;t(e.exports,"isObject",(function(){return n}),(function(t){return n=t})),n=function(t){return null!=t&&"object"==typeof t}})),o("hRU26",(function(e,r){var o;t(e.exports,"tryCatch",(function(){return o}),(function(t){return o=t}));var i,s=n("ihKv9");function u(){try{return i.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}o=function(t){return i=t,u}})),o("ihKv9",(function(e,r){var n;t(e.exports,"errorObject",(function(){return n}),(function(t){return n=t})),n={e:{}}})),o("a3TDn",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(e,t),e}(Error);t.exports.UnsubscriptionError=n})),o("5MB8B",(function(e,r){var n;t(e.exports,"empty",(function(){return n}),(function(t){return n=t})),n={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}})),o("eZraz",(function(e,r){var o;t(e.exports,"rxSubscriber",(function(){return o}),(function(t){return o=t}));var i=n("3NgXI").root.Symbol;o="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber"})),o("1XotC",(function(e,r){var o;t(e.exports,"observable",(function(){return o}),(function(t){return o=t}));var i=n("3NgXI");function s(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}o=s(i.root)})),o("7Rqov",(function(e,r){var o,i;t(e.exports,"pipe",(function(){return o}),(function(t){return o=t})),t(e.exports,"pipeFromArray",(function(){return i}),(function(t){return i=t}));var s=n("ksM5b");function u(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:s.noop}o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return u(t)},i=u})),o("ksM5b",(function(e,r){var n;t(e.exports,"noop",(function(){return n}),(function(t){return n=t})),n=function(){}})),o("eXWlj",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("gEhGF"),i=n("2ebuc"),s=n("fk7eH"),u=n("133oO"),c=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=t[t.length-1];u.isScheduler(n)?t.pop():n=null;var o=t.length;return o>1?new e(t,n):1===o?new i.ScalarObservable(t[0],n):new s.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;r>=n?o.complete():(o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(r[i]);t.complete()},e}(o.Observable);t.exports.ArrayObservable=c})),o("2ebuc",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return r(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}(n("gEhGF").Observable);t.exports.ScalarObservable=o})),o("fk7eH",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n("gEhGF").Observable);t.exports.EmptyObservable=o})),o("133oO",(function(e,r){var n;t(e.exports,"isScheduler",(function(){return n}),(function(t){return n=t})),n=function(t){return t&&"function"==typeof t.schedule}})),o("6YdGu",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("2jw1L"),i=n("3s4Cj");t.exports.mergeMap=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return"number"==typeof e&&(r=e,e=null),n.lift(new s(t,e,r))}};var s=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.resultSelector,this.concurrent))},t}();t.exports.MergeMapOperator=s;var u=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(o.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber);t.exports.MergeMapSubscriber=u})),o("2jw1L",(function(e,r){var o;t(e.exports,"subscribeToResult",(function(){return o}),(function(t){return o=t}));var i=n("3NgXI"),s=n("b0A1L"),u=n("cFxy9"),c=n("TbUu3"),a=n("gEhGF"),l=n("70xGb"),f=n("qtiem"),p=n("1XotC");o=function(t,e,r,n){var o=new f.InnerSubscriber(t,r,n);if(o.closed)return null;if(e instanceof a.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):(o.syncErrorThrowable=!0,e.subscribe(o));if(s.isArrayLike(e)){for(var h=0,d=e.length;h<d&&!o.closed;h++)o.next(e[h]);o.closed||o.complete()}else{if(u.isPromise(e))return e.then((function(t){o.closed||(o.next(t),o.complete())}),(function(t){return o.error(t)})).then(null,(function(t){i.root.setTimeout((function(){throw t}))})),o;if(e&&"function"==typeof e[l.iterator])for(var v=e[l.iterator]();;){var b=v.next();if(b.done){o.complete();break}if(o.next(b.value),o.closed)break}else if(e&&"function"==typeof e[p.observable]){var y=e[p.observable]();if("function"==typeof y.subscribe)return y.subscribe(new f.InnerSubscriber(t,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var m="You provided "+(c.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(m))}}return null}})),o("b0A1L",(function(e,r){var n;t(e.exports,"isArrayLike",(function(){return n}),(function(t){return n=t})),n=function(t){return t&&"number"==typeof t.length}})),o("cFxy9",(function(e,r){var n;t(e.exports,"isPromise",(function(){return n}),(function(t){return n=t})),n=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}})),o("70xGb",(function(e,r){var o;t(e.exports,"iterator",(function(){return o}),(function(t){return o=t}));var i=n("3NgXI");function s(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}o=s(i.root)})),o("qtiem",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("2qwUA").Subscriber);t.exports.InnerSubscriber=o})),o("3s4Cj",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("2qwUA").Subscriber);t.exports.OuterSubscriber=o})),o("4xMHR",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("2qwUA");t.exports.tap=function(t,e,r){return function(n){return n.lift(new i(t,e,r))}};var i=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,r,n,i){t.call(this,e);var s=new o.Subscriber(r,n,i);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)})),o("1oyUU",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("gEhGF"),i=n("2qwUA"),s=n("lp7cl"),u=n("j7a8D"),c=n("1vj28"),a=n("eZraz"),l=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(i.Subscriber);t.exports.SubjectSubscriber=l;var f=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[a.rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(o.Observable);t.exports.Subject=f;var p=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(f);t.exports.AnonymousSubject=p})),o("j7a8D",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);t.exports.ObjectUnsubscribedError=n})),o("1vj28",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(n("lp7cl").Subscription);t.exports.SubjectSubscription=o})),o("9mShp",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("2qwUA");t.exports.map=function(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new i(t,e))}};var i=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();t.exports.MapOperator=i;var s=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)})),o("aJVh7",(function(e,r){var o;t(e.exports,"from",(function(){return o}),(function(t){return o=t}));var i=n("aw7Dc");o=i.FromObservable.create})),o("aw7Dc",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("5uTpE"),i=n("b0A1L"),s=n("cFxy9"),u=n("bSUmI"),c=n("g6ryM"),a=n("eXWlj"),l=n("j3kIn"),f=n("70xGb"),p=n("gEhGF"),h=n("77Svb"),d=n("1XotC"),v=function(t){function e(e,r){t.call(this,null),this.ish=e,this.scheduler=r}return r(e,t),e.create=function(t,r){if(null!=t){if("function"==typeof t[d.observable])return t instanceof p.Observable&&!r?t:new e(t,r);if(o.isArray(t))return new a.ArrayObservable(t,r);if(s.isPromise(t))return new u.PromiseObservable(t,r);if("function"==typeof t[f.iterator]||"string"==typeof t)return new c.IteratorObservable(t,r);if(i.isArrayLike(t))return new l.ArrayLikeObservable(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[d.observable]().subscribe(t):e[d.observable]().subscribe(new h.ObserveOnSubscriber(t,r,0))},e}(p.Observable);t.exports.FromObservable=v})),o("bSUmI",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("3NgXI"),i=function(t){function e(e,r){t.call(this),this.promise=e,this.scheduler=r}return r(e,t),e.create=function(t,r){return new e(t,r)},e.prototype._subscribe=function(t){var e=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?t.closed||(t.next(this.value),t.complete()):r.then((function(r){e.value=r,e._isScalar=!0,t.closed||(t.next(r),t.complete())}),(function(e){t.closed||t.error(e)})).then(null,(function(t){o.root.setTimeout((function(){throw t}))}));else if(this._isScalar){if(!t.closed)return n.schedule(s,0,{value:this.value,subscriber:t})}else r.then((function(r){e.value=r,e._isScalar=!0,t.closed||t.add(n.schedule(s,0,{value:r,subscriber:t}))}),(function(e){t.closed||t.add(n.schedule(u,0,{err:e,subscriber:t}))})).then(null,(function(t){o.root.setTimeout((function(){throw t}))}))},e}(n("gEhGF").Observable);function s(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function u(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}t.exports.PromiseObservable=i})),o("g6ryM",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("3NgXI"),i=n("gEhGF"),s=n("70xGb"),u=function(t){function e(e,r){if(t.call(this),this.scheduler=r,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[s.iterator];if(!e&&"string"==typeof t)return new c(t);if(!e&&void 0!==t.length)return new a(t);if(!e)throw new TypeError("object is not iterable");return t[s.iterator]()}(e)}return r(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,o=t.subscriber;if(r)o.error(t.error);else{var i=n.next();i.done?o.complete():(o.next(i.value),t.index=e+1,o.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{index:0,iterator:r,subscriber:t});for(;;){var o=r.next();if(o.done){t.complete();break}if(t.next(o.value),t.closed){"function"==typeof r.return&&r.return();break}}},e}(i.Observable);t.exports.IteratorObservable=u;var c=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),a=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=function(t){var e=+t.length;return isNaN(e)?0:0!==e&&function(t){return"number"==typeof t&&o.root.isFinite(t)}(e)?(e=function(t){var e=+t;return 0===e||isNaN(e)?e:e<0?-1:1}(e)*Math.floor(Math.abs(e)),e<=0?0:e>l?l:e):e}(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var l=Math.pow(2,53)-1})),o("j3kIn",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("gEhGF"),i=n("2ebuc"),s=n("fk7eH"),u=function(t){function e(e,r){t.call(this),this.arrayLike=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,r){var n=t.length;return 0===n?new s.EmptyObservable:1===n?new i.ScalarObservable(t[0],r):new e(t,r)},e.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,o=t.subscriber;o.closed||(r>=n?o.complete():(o.next(e[r]),t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.arrayLike,n=this.scheduler,o=r.length;if(n)return n.schedule(e.dispatch,0,{arrayLike:r,index:0,length:o,subscriber:t});for(var i=0;i<o&&!t.closed;i++)t.next(r[i]);t.complete()},e}(o.Observable);t.exports.ArrayLikeObservable=u})),o("77Svb",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("2qwUA"),i=n("f68BE");t.exports.observeOn=function(t,e){return void 0===e&&(e=0),function(r){return r.lift(new s(t,e))}};var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}();t.exports.ObserveOnOperator=s;var u=function(t){function e(e,r,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=r,this.delay=n}return r(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(i.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(i.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(i.Notification.createComplete())},e}(o.Subscriber);t.exports.ObserveOnSubscriber=u;var c=function(t,e){this.notification=t,this.destination=e};t.exports.ObserveOnMessage=c})),o("f68BE",(function(e,r){var o;t(e.exports,"Notification",(function(){return o}),(function(t){return o=t}));var i=n("gEhGF"),s=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return i.Observable.of(this.value);case"E":return i.Observable.throw(this.error);case"C":return i.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();o=s})),o("3puyE",(function(e,r){var o;t(e.exports,"concatMap",(function(){return o}),(function(t){return o=t}));var i=n("6YdGu");o=function(t,e){return i.mergeMap(t,e,1)}})),o("aiGI8",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("3NgXI"),i=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.pending=!1,this.work=r}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),o.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;o.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n("gbXYb").Action);t.exports.AsyncAction=i})),o("gbXYb",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("lp7cl").Subscription);t.exports.Action=o})),o("f6KzA",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(n("c4HcD").Scheduler);t.exports.AsyncScheduler=o})),o("c4HcD",(function(e,r){var n;t(e.exports,"Scheduler",(function(){return n}),(function(t){return n=t}));var o=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();n=o})),o("kWY6l",(function(e,o){t(e.exports,"MediaClientContext",(function(){return u})),t(e.exports,"getMediaClient",(function(){return a})),t(e.exports,"MediaClientProvider",(function(){return l})),t(e.exports,"useMediaClient",(function(){return f}));var i=n("9nHZC"),s=n("9sGP3"),u=r(i).createContext(void 0),c=new Map,a=function(t){if(!t)return new(0,s.MediaClient)({authProvider:function(){return Promise.resolve({clientId:"",token:"",baseUrl:""})}});var e=c.get(t);return e||(e=new(0,s.MediaClient)(t),c.set(t,e)),e},l=function(t){var e=t.children,n=t.clientConfig,o=(0,i.useMemo)((function(){return a(n)}),[n]);return r(i).createElement(u.Provider,{value:o},e)},f=function(){var t=r(i).useContext(u);if(!t)throw new Error("No MediaClient set, use MediaClientProvider to set one");return t}})),o("9sGP3",(function(e,o){t(e.exports,"MediaClient",(function(){return v}));var i=n("4mVfk"),s=n("uqRmf"),u=n("eVDe4"),c=n("8DpVo"),a=n("5rT5y");n("33HVa");var l=n("bHXlK"),f=n("k6Tu2"),p=n("6Oiyr"),h=n("2Ij9u");n("8SZxD");var d=n("fqIJk"),v=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.mediaStore,o=arguments.length>2?arguments[2]:void 0;r(s)(this,t),this.mediaClientConfig=e,this.store=n,this.mediaStore=null!=o?o:new(0,f.MediaStore)({authProvider:e.authProvider,initialAuth:e.initialAuth,chunkHashAlgorithm:e.useSha256ForUploads?l.ChunkHashAlgorithm.Sha256:l.ChunkHashAlgorithm.Sha1}),this.config=e,this.file=new(0,p.FileFetcherImpl)(this.mediaStore,this.store),this.eventEmitter=new(0,a.EventEmitter2),this.stargate=new(0,h.StargateClient)(e.stargateBaseUrl)}var e,o,v;return r(u)(t,[{key:"__DO_NOT_USE__getMediaStore",value:function(){return this.store}},{key:"getImage",value:function(t,e,r,n,o){return this.mediaStore.getImage(t,e,r,n,o)}},{key:"getImageUrl",value:function(t,e){return this.mediaStore.getFileImageURL(t,e)}},{key:"getImageUrlSync",value:function(t,e){return this.mediaStore.getFileImageURLSync(t,e)}},{key:"getImageMetadata",value:(v=r(i)(r(c).mark((function t(e,n){return r(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mediaStore.getImageMetadata(e,n);case 2:return t.abrupt("return",t.sent.metadata);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},{key:"mobileUploadPromise",value:(o=r(i)(r(c).mark((function t(){var e;return r(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.mobileUpload){t.next=2;break}return t.abrupt("return",this.mobileUpload);case 2:return t.next=4,n("c5RLY");case 4:return e=t.sent,this.mobileUpload=new e.MobileUploadImpl(this.mediaStore,this.store),t.abrupt("return",this.mobileUpload);case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"removeFileFromCollection",value:(e=r(i)(r(c).mark((function t(e,n,o,i){return r(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mediaStore.removeCollectionFile(e,n,o,i);case 2:case"end":return t.stop()}}),t,this)}))),function(t,r,n,o){return e.apply(this,arguments)})},{key:"on",value:function(t,e){this.eventEmitter.on(t,e)}},{key:"off",value:function(t,e){this.eventEmitter.off(t,e)}},{key:"emit",value:function(t,e){return this.eventEmitter.emit(t,e)}}]),t}()})),o("5rT5y",(function(t,e){var r=n("8ovux");!function(e){var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;function i(){this._events={},this._conf&&s.call(this,this._conf)}function s(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._maxListeners=t.maxListeners!==e?t.maxListeners:o,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=o}function u(t,e){var n="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+e+"."),void 0!==r&&r.emitWarning){var o=new Error(n);o.name="MaxListenersExceededWarning",o.emitter=this,o.count=t,r.emitWarning(o)}else console.error(n),console.trace&&console.trace()}function c(t){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,s.call(this,t)}function a(t,e,r,n){if(!r)return[];var o,i,s,u,c,l,f,p=[],h=e.length,d=e[n],v=e[n+1];if(n===h&&r._listeners){if("function"==typeof r._listeners)return t&&t.push(r._listeners),[r];for(o=0,i=r._listeners.length;o<i;o++)t&&t.push(r._listeners[o]);return[r]}if("*"===d||"**"===d||r[d]){if("*"===d){for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&(p=p.concat(a(t,e,r[s],n+1)));return p}if("**"===d){for(s in(f=n+1===h||n+2===h&&"*"===v)&&r._listeners&&(p=p.concat(a(t,e,r,h))),r)"_listeners"!==s&&r.hasOwnProperty(s)&&("*"===s||"**"===s?(r[s]._listeners&&!f&&(p=p.concat(a(t,e,r[s],h))),p=p.concat(a(t,e,r[s],n))):p=s===v?p.concat(a(t,e,r[s],n+2)):p.concat(a(t,e,r[s],n)));return p}p=p.concat(a(t,e,r[d],n+1))}if((u=r["*"])&&a(t,e,u,n+1),c=r["**"])if(n<h)for(s in c._listeners&&a(t,e,c,h),c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===v?a(t,e,c[s],n+2):s===d?a(t,e,c[s],n+1):((l={})[s]=c[s],a(t,e,{"**":l},n+1)));else c._listeners?a(t,e,c,h):c["*"]&&c["*"]._listeners&&a(t,e,c["*"],h);return p}function l(t,r){for(var n=0,o=(t="string"==typeof t?t.split(this.delimiter):t.slice()).length;n+1<o;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var i=this.listenerTree,s=t.shift();s!==e;){if(i[s]||(i[s]={}),i=i[s],0===t.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(r),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,u.call(this,i._listeners.length,s))):i._listeners=r,!0;s=t.shift()}return!0}c.EventEmitter2=c,c.prototype.delimiter=".",c.prototype.setMaxListeners=function(t){t!==e&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},c.prototype.event="",c.prototype.once=function(t,e){return this._once(t,e,!1)},c.prototype.prependOnceListener=function(t,e){return this._once(t,e,!0)},c.prototype._once=function(t,e,r){return this._many(t,1,e,r),this},c.prototype.many=function(t,e,r){return this._many(t,e,r,!1)},c.prototype.prependMany=function(t,e,r){return this._many(t,e,r,!0)},c.prototype._many=function(t,e,r,n){var o=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");function i(){return 0==--e&&o.off(t,i),r.apply(this,arguments)}return i._origin=r,this._on(t,i,n),o},c.prototype.emit=function(){this._events||i.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;var e,r,n,o,s,u=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),u>3)for(e=new Array(u),o=0;o<u;o++)e[o]=arguments[o];for(n=0,r=s.length;n<r;n++)switch(this.event=t,u){case 1:s[n].call(this,t);break;case 2:s[n].call(this,t,arguments[1]);break;case 3:s[n].call(this,t,arguments[1],arguments[2]);break;default:s[n].apply(this,e)}}if(this.wildcard){s=[];var c="string"==typeof t?t.split(this.delimiter):t.slice();a.call(this,s,c,this.listenerTree,0)}else{if("function"==typeof(s=this._events[t])){switch(this.event=t,u){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(u-1),o=1;o<u;o++)e[o-1]=arguments[o];s.apply(this,e)}return!0}s&&(s=s.slice())}if(s&&s.length){if(u>3)for(e=new Array(u-1),o=1;o<u;o++)e[o-1]=arguments[o];for(n=0,r=s.length;n<r;n++)switch(this.event=t,u){case 1:s[n].call(this);break;case 2:s[n].call(this,arguments[1]);break;case 3:s[n].call(this,arguments[1],arguments[2]);break;default:s[n].apply(this,e)}return!0}if(!this._all&&"error"===t)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},c.prototype.emitAsync=function(){this._events||i.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var e,r,n,o,s,u=[],c=arguments.length;if(this._all){if(c>3)for(e=new Array(c),o=1;o<c;o++)e[o]=arguments[o];for(n=0,r=this._all.length;n<r;n++)switch(this.event=t,c){case 1:u.push(this._all[n].call(this,t));break;case 2:u.push(this._all[n].call(this,t,arguments[1]));break;case 3:u.push(this._all[n].call(this,t,arguments[1],arguments[2]));break;default:u.push(this._all[n].apply(this,e))}}if(this.wildcard){s=[];var l="string"==typeof t?t.split(this.delimiter):t.slice();a.call(this,s,l,this.listenerTree,0)}else s=this._events[t];if("function"==typeof s)switch(this.event=t,c){case 1:u.push(s.call(this));break;case 2:u.push(s.call(this,arguments[1]));break;case 3:u.push(s.call(this,arguments[1],arguments[2]));break;default:for(e=new Array(c-1),o=1;o<c;o++)e[o-1]=arguments[o];u.push(s.apply(this,e))}else if(s&&s.length){if(s=s.slice(),c>3)for(e=new Array(c-1),o=1;o<c;o++)e[o-1]=arguments[o];for(n=0,r=s.length;n<r;n++)switch(this.event=t,c){case 1:u.push(s[n].call(this));break;case 2:u.push(s[n].call(this,arguments[1]));break;case 3:u.push(s[n].call(this,arguments[1],arguments[2]));break;default:u.push(s[n].apply(this,e))}}else if(!this._all&&"error"===t)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},c.prototype.on=function(t,e){return this._on(t,e,!1)},c.prototype.prependListener=function(t,e){return this._on(t,e,!0)},c.prototype.onAny=function(t){return this._onAny(t,!1)},c.prototype.prependAny=function(t){return this._onAny(t,!0)},c.prototype.addListener=c.prototype.on,c.prototype._onAny=function(t,e){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},c.prototype._on=function(t,e,r){if("function"==typeof t)return this._onAny(t,e),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||i.call(this),this.emit("newListener",t,e),this.wildcard?(l.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),r?this._events[t].unshift(e):this._events[t].push(e),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,u.call(this,this._events[t].length,t))):this._events[t]=e,this)},c.prototype.off=function(t,r){if("function"!=typeof r)throw new Error("removeListener only takes instances of Function");var o,i=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();i=a.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;o=this._events[t],i.push({_listeners:o})}for(var u=0;u<i.length;u++){var c=i[u];if(o=c._listeners,n(o)){for(var l=-1,f=0,p=o.length;f<p;f++)if(o[f]===r||o[f].listener&&o[f].listener===r||o[f]._origin&&o[f]._origin===r){l=f;break}if(l<0)continue;return this.wildcard?c._listeners.splice(l,1):this._events[t].splice(l,1),0===o.length&&(this.wildcard?delete c._listeners:delete this._events[t]),this.emit("removeListener",t,r),this}(o===r||o.listener&&o.listener===r||o._origin&&o._origin===r)&&(this.wildcard?delete c._listeners:delete this._events[t],this.emit("removeListener",t,r))}return function t(r){if(r!==e){var n=Object.keys(r);for(var o in n){var i=n[o],s=r[i];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&t(r[i]),0===Object.keys(s).length&&delete r[i])}}}(this.listenerTree),this},c.prototype.offAny=function(t){var e,r=0,n=0;if(t&&this._all&&this._all.length>0){for(r=0,n=(e=this._all).length;r<n;r++)if(t===e[r])return e.splice(r,1),this.emit("removeListenerAny",t),this}else{for(r=0,n=(e=this._all).length;r<n;r++)this.emit("removeListenerAny",e[r]);this._all=[]}return this},c.prototype.removeListener=c.prototype.off,c.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||i.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=a.call(this,null,e,this.listenerTree,0),n=0;n<r.length;n++){r[n]._listeners=null}else this._events&&(this._events[t]=null);return this},c.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return a.call(this,e,r,this.listenerTree,0),e}return this._events||i.call(this),this._events[t]||(this._events[t]=[]),n(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},c.prototype.eventNames=function(){return Object.keys(this._events)},c.prototype.listenerCount=function(t){return this.listeners(t).length},c.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define((function(){return c})):t.exports=c}()})),o("33HVa",(function(e,r){t(e.exports,"mediaState",(function(){return n("fCU0m").mediaState})),t(e.exports,"isClientBasedAuth",(function(){return n("8EBFq").isClientBasedAuth})),t(e.exports,"authToOwner",(function(){return n("8EBFq").authToOwner})),t(e.exports,"ChunkHashAlgorithm",(function(){return n("bHXlK").ChunkHashAlgorithm}));n("fCU0m"),n("8EBFq"),n("bHXlK")})),o("fCU0m",(function(e,r){t(e.exports,"mediaState",(function(){return i}));var o=n("5rT5y"),i={streams:new(0,n("rE472").LRUMap)(1e3),stateDeferreds:new Map,eventEmitter:new(0,o.EventEmitter2)}})),o("8EBFq",(function(e,r){function n(t){return!!t.clientId}t(e.exports,"isClientBasedAuth",(function(){return n})),t(e.exports,"authToOwner",(function(){return o}));var o=function(t){return function(t){return!!t.asapIssuer}(t)?t:{id:t.clientId,baseUrl:t.baseUrl,token:t.token}}})),o("bHXlK",(function(e,r){t(e.exports,"ChunkHashAlgorithm",(function(){return n}));var n=function(t){return t.Sha1="sha1",t.Sha256="sha256",t}({})})),o("k6Tu2",(function(e,o){t(e.exports,"MediaStore",(function(){return _})),t(e.exports,"getMediaEnvironment",(function(){return j})),t(e.exports,"getMediaRegion",(function(){return T}));var i=n("4mVfk"),s=n("uqRmf"),u=n("eVDe4"),c=n("kFnE9"),a=n("8DpVo"),l=n("hgzLj"),f=n("ddUsN"),p=n("hZPZB"),h=n("9EXyO"),d=n("8ICSu"),v=n("h9bvE");n("33HVa");var b=n("bHXlK"),y=n("dEQSq");function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){r(c)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x="media-api-region",w="media-api-environment",S=function(t){var e,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g(g({},t),{},{"max-age":null!==(e=null==t?void 0:t["max-age"])&&void 0!==e?e:f.FILE_CACHE_MAX_AGE,allowAnimated:null===(r=null==t?void 0:t.allowAnimated)||void 0===r||r,mode:null!==(n=null==t?void 0:t.mode)&&void 0!==n?n:"crop"},o?{width:f.MAX_RESOLUTION,height:f.MAX_RESOLUTION}:{})},O={Accept:"application/json","Content-Type":"application/json"},_=function(){function t(e){var n=this;r(s)(this,t),r(c)(this,"resolveAuth",(function(t){return(0,v.resolveAuth)(n.config.authProvider,t)})),r(c)(this,"resolveInitialAuth",(function(){return(0,v.resolveInitialAuth)(n.config.initialAuth)})),this.config=e,this._chunkHashAlgorithm=e.chunkHashAlgorithm||b.ChunkHashAlgorithm.Sha1}var e,n,o,m,_,E,j,T,A,P,I,F;return r(u)(t,[{key:"removeCollectionFile",value:(F=r(i)(r(a).mark((function t(e,n,o,i){var s,u;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:o}}]},u=g(g({},{method:"PUT",endpoint:"/collection/{collectionName}"}),{},{authContext:{collectionName:n},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s),traceContext:i}),t.next=5,this.request("/collection/".concat(n),u);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return F.apply(this,arguments)})},{key:"createUpload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n={method:"POST",endpoint:"/upload"},o=g(g({},n),{},{authContext:{collectionName:e},params:{createUpTo:t,hashAlgorithm:this._chunkHashAlgorithm},headers:{Accept:"application/json"},traceContext:r});return this.request("/upload",o).then((0,d.createMapResponseToJson)(n))}},{key:"uploadChunk",value:(I=r(i)(r(a).mark((function t(e,n,o,i,s,u){var c;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g(g({},{method:"PUT",endpoint:"/chunk/{etag}"}),{},{params:{uploadId:o,partNumber:i},authContext:{collectionName:s},body:n,traceContext:u}),t.next=4,this.request("/chunk/".concat(e),c);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o,i){return I.apply(this,arguments)})},{key:"createFileFromUpload",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n={method:"POST",endpoint:"/file/upload"},o=g(g({},n),{},{authContext:{collectionName:e.collection},params:e,headers:O,body:JSON.stringify(t),traceContext:r});return this.request("/file/upload",o).then((0,d.createMapResponseToJson)(n))}},{key:"getRejectedResponseFromDescriptor",value:function(t,e){return{fileId:t.fileId,error:{code:"ExceedMaxFileSizeLimit",title:"The expected file size exceeded the maximum size limit.",href:"https://dt-api-filestore--app.ap-southeast-2.dev.atl-paas.net/api.html#BadRequest",limit:e,size:t.size}}}},{key:"touchFiles",value:(P=r(i)(r(a).mark((function t(e){var n,o,i,s,u=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},o=u.length>2?u[2]:void 0,s=g(g({},i={method:"POST",endpoint:"/upload/createWithFiles"}),{},{authContext:{collectionName:n.collection},headers:O,body:JSON.stringify(e),traceContext:o,params:{hashAlgorithm:this._chunkHashAlgorithm}}),t.abrupt("return",this.request("/upload/createWithFiles",s).then((0,d.createMapResponseToJson)(i)));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return P.apply(this,arguments)})},{key:"getFile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n={method:"GET",endpoint:"/file/{fileId}"},o=g(g({},n),{},{authContext:{collectionName:e.collection},params:e,traceContext:r});return this.request("/file/".concat(t),o).then((0,d.createMapResponseToJson)(n))}},{key:"getFileImageURL",value:(A=r(i)(r(a).mark((function t(e,n){var o,i;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(n||{}).collection,t.next=3,this.resolveAuth({collectionName:o});case 3:return i=t.sent,t.abrupt("return",this.createFileImageURL(e,i,n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return A.apply(this,arguments)})},{key:"getFileImageURLSync",value:function(t,e){var r=this.resolveInitialAuth();return this.createFileImageURL(t,r,e)}},{key:"createFileImageURL",value:function(t,e,r){var n={params:S(r),auth:e},o=(0,y.getBooleanFF)("platform.media-cdn-delivery")?"image/cdn":"image";return(0,d.createUrl)("".concat(e.baseUrl,"/file/").concat(t,"/").concat(o),n)}},{key:"getFileBinary",value:(T=r(i)(r(a).mark((function t(e,n){var o,i,s,u,c,l=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:f.FILE_CACHE_MAX_AGE,i={},s=(0,y.getBooleanFF)("platform.media-cdn-delivery")?"binary/cdn":"binary",u={method:"GET",endpoint:"/file/{fileId}/".concat(s)},c=g(g({},u),{},{authContext:{collectionName:n},headers:i,params:{"max-age":"".concat(o)}}),t.abrupt("return",this.request("/file/".concat(e,"/").concat(s),c).then((0,d.createMapResponseToBlob)(u)));case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return T.apply(this,arguments)})},{key:"getFileBinaryURL",value:(j=r(i)(r(a).mark((function t(e,n){var o,i,s,u,c=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:f.FILE_CACHE_MAX_AGE,t.next=3,this.resolveAuth({collectionName:n});case 3:return i=t.sent,s={params:{dl:!0,collection:n,"max-age":o},auth:i},u=(0,y.getBooleanFF)("platform.media-cdn-delivery")?"binary/cdn":"binary",t.abrupt("return",(0,d.createUrl)("".concat(i.baseUrl,"/file/").concat(e,"/").concat(u),s));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return j.apply(this,arguments)})},{key:"getArtifactURL",value:(E=r(i)(r(a).mark((function t(e,n,o){var i,s,u;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(0,p.getArtifactUrl)(e,n)){t.next=3;break}throw new Error("artifact ".concat(n," not found"));case 3:if(i.includes("media-cdn")){t.next=9;break}return t.next=6,this.resolveAuth({collectionName:o});case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=void 0;case 10:return s=t.t0,u={params:{collection:o,"max-age":f.FILE_CACHE_MAX_AGE},auth:s},t.abrupt("return",(0,d.createUrl)(i,u));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return E.apply(this,arguments)})},{key:"getImage",value:(_=r(i)(r(a).mark((function t(e,n,o,i,s){var u,c,l,f;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={},c=(0,y.getBooleanFF)("platform.media-cdn-delivery")?"image/cdn":"image",l={method:"GET",endpoint:"/file/{fileId}/".concat(c)},f=g(g({},l),{},{authContext:{collectionName:n&&n.collection},params:S(n,i),headers:u,traceContext:s}),t.abrupt("return",this.request("/file/".concat(e,"/").concat(c),f,o).then((0,d.createMapResponseToBlob)(l)));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o){return _.apply(this,arguments)})},{key:"getItems",value:(m=r(i)(r(a).mark((function t(e,n,o){var i,s,u;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.map((function(t){return{type:"file",id:t,collection:n}})),u=g(g({},s={method:"POST",endpoint:"/items"}),{},{authContext:{collectionName:n},headers:O,body:JSON.stringify({descriptors:i}),traceContext:o}),t.abrupt("return",this.request("/items",u).then((0,d.createMapResponseToJson)(s)));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return m.apply(this,arguments)})},{key:"getImageMetadata",value:(o=r(i)(r(a).mark((function t(e,n,o){var i,s;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=g(g({},i={method:"GET",endpoint:"/file/{fileId}/image/metadata"}),{},{authContext:{collectionName:n&&n.collection},params:n,traceContext:o}),t.abrupt("return",this.request("/file/".concat(e,"/image/metadata"),s).then((0,d.createMapResponseToJson)(i)));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return o.apply(this,arguments)})},{key:"appendChunksToUpload",value:(n=r(i)(r(a).mark((function t(e,n,o,i){var s;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=g(g({},{method:"PUT",endpoint:"/upload/{uploadId}/chunks"}),{},{authContext:{collectionName:o},headers:O,body:JSON.stringify(n),traceContext:i}),t.next=4,this.request("/upload/".concat(e,"/chunks"),s);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o){return n.apply(this,arguments)})},{key:"copyFileWithToken",value:function(t,e,r){var n={method:"POST",endpoint:"/file/copy/withToken"},o=g(g({},n),{},{authContext:{collectionName:e.collection},params:e,headers:O,body:JSON.stringify(t),traceContext:r});return this.request("/file/copy/withToken",o).then((0,d.createMapResponseToJson)(n))}},{key:"request",value:(e=r(i)(r(a).mark((function t(e){var n,o,i,s,u,c,f,p,d,v,b,y,m,S=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=S.length>2?S[2]:void 0,i=(n=S.length>1&&void 0!==S[1]?S[1]:{method:"GET",endpoint:void 0,authContext:{}}).method,s=n.endpoint,u=n.authContext,c=n.params,f=n.headers,p=n.body,d=n.clientOptions,v=n.traceContext,t.next=5,this.resolveAuth(u);case 5:return b=t.sent,y=v?g(g({},v),{},{spanId:(null==v?void 0:v.spanId)||(0,l.getRandomHex)(8)}):void 0,t.next=9,(0,h.request)("".concat(b.baseUrl).concat(e),{method:i,endpoint:s,auth:b,params:c,headers:f,body:p,clientOptions:d,traceContext:y},o);case 9:return m=t.sent,k(x,m.headers.get("x-media-region")),k(w,m.headers.get("x-media-env")),t.abrupt("return",m);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"chunkHashAlgorithm",get:function(){return this._chunkHashAlgorithm}}]),t}(),E=function(t){return window&&window.sessionStorage&&window.sessionStorage.getItem(t)||void 0},k=function(t,e){e&&window&&window.sessionStorage&&(window.sessionStorage.getItem(t)!==e&&window.sessionStorage.setItem(t,e))},j=function(){return E(w)},T=function(){return E(x)}})),o("hgzLj",(function(e,o){t(e.exports,"isUndefined",(function(){return u})),t(e.exports,"omitBy",(function(){return c})),t(e.exports,"getRandomHex",(function(){return l}));var i=n("b4Ivn"),s=n("9q1kH"),u=function(t){return void 0===t},c=function(t,e){return Object.fromEntries(Object.entries(t).filter((function(t){var n=r(s)(t,2)[1];return!e(n)})))};function a(t){return r(i)(Array(2*t)).map((function(){return Math.floor(16*Math.random()).toString(16)})).join("")}function l(t){var e,r;if(null!==(e=window)&&void 0!==e&&e.crypto)try{r=Array.from(window.crypto.getRandomValues(new Uint8Array(t))).map((function(t){return t.toString(16).padStart(2,"0")})).join("")}catch(e){r=a(t)}else r=a(t);return r}})),o("ddUsN",(function(e,r){t(e.exports,"RECENTS_COLLECTION",(function(){return i})),t(e.exports,"FILE_CACHE_MAX_AGE",(function(){return s})),t(e.exports,"MAX_RESOLUTION",(function(){return u})),t(e.exports,"CHUNK_SIZE",(function(){return c})),t(e.exports,"PROCESSING_BATCH_SIZE",(function(){return a})),t(e.exports,"MAX_UPLOAD_FILE_SIZE",(function(){return l}));var o=n("bGg4k"),i="recents",s=2592e3,u=4096,c=5*o.DATA_UNIT.MB,a=1e3,l=2*o.DATA_UNIT.TB})),o("bGg4k",(function(e,r){t(e.exports,"isPreviewableType",(function(){return n})),t(e.exports,"DATA_UNIT",(function(){return o}));var n=function(t){return["audio","video","image","doc"].indexOf(t)>-1},o=function(t){return t[t.MB=1048576]="MB",t[t.GB=1073741824]="GB",t[t.TB=1099511627776]="TB",t}({})})),o("hZPZB",(function(e,r){t(e.exports,"getArtifactUrl",(function(){return n}));var n=function(t,e){var r,n;return(null===(r=t[e])||void 0===r?void 0:r.cdnUrl)||(null===(n=t[e])||void 0===n?void 0:n.url)}})),o("9EXyO",(function(e,o){t(e.exports,"request",(function(){return c}));var i=n("4mVfk"),s=n("8DpVo"),u=(n("c8qg3"),n("8ICSu"));function c(t){return a.apply(this,arguments)}function a(){return a=r(i)(r(s).mark((function t(e){var n,o,i,c,a,l,f,p,h,d,v,b,y,m,g,x=arguments;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=x.length>2?x[2]:void 0,i=(n=x.length>1&&void 0!==x[1]?x[1]:{}).method,c=void 0===i?"GET":i,a=n.endpoint,l=n.auth,f=n.params,p=n.headers,h=n.body,d=n.clientOptions,v=void 0===d?{}:d,b=n.traceContext,y=v.retryOptions,m={method:c,endpoint:a,traceContext:b},g=function(){return fetch((0,u.createUrl)(e,{params:f}),{method:c,body:h,headers:(0,u.extendHeaders)(p,l,b),signal:o&&o.signal}).then((0,u.createProcessFetchResponse)(m))},t.abrupt("return",(0,u.fetchRetry)(g,m,y));case 7:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}})),o("c8qg3",(function(e,o){t(e.exports,"RequestError",(function(){return p})),t(e.exports,"isRequestError",(function(){return h}));var i=n("uqRmf"),s=n("eVDe4"),u=n("3BD5g"),c=n("ck3YL"),a=n("lH0U2");function l(t){var e=f();return function(){var n,o=r(a)(t);if(e){var i=r(a)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(c)(this,n)}}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}var p=function(t){r(u)(n,t);var e=l(n);function n(t,o,s){var u;return r(i)(this,n),(u=e.call(this,t)).reason=t,u.metadata=o,u.innerError=s,u}return r(s)(n,[{key:"attributes",get:function(){var t=this.reason,e=this.metadata,r=void 0===e?{}:e;return{reason:t,method:r.method,endpoint:r.endpoint,mediaRegion:r.mediaRegion,mediaEnv:r.mediaEnv,attempts:r.attempts,clientExhaustedRetries:r.clientExhaustedRetries,statusCode:r.statusCode,innerError:this.innerError}}}]),n}(n("hUNpD").BaseMediaClientError);function h(t){return t instanceof p}})),o("hUNpD",(function(e,o){t(e.exports,"BaseMediaClientError",(function(){return d}));var i=n("eVDe4"),s=n("uqRmf"),u=n("lwdaQ"),c=n("3BD5g"),a=n("ck3YL"),l=n("lH0U2"),f=n("6FnrE");n("ljZEh");function p(t){var e=h();return function(){var n,o=r(l)(t);if(e){var i=r(l)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(a)(this,n)}}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}var d=function(t){r(c)(n,t);var e=p(n);function n(t){var o;return r(s)(this,n),(o=e.call(this,t)).message=t,Object.setPrototypeOf(r(u)(o),(this instanceof n?this.constructor:void 0).prototype),"captureStackTrace"in Error&&Error.captureStackTrace(r(u)(o),this instanceof n?this.constructor:void 0),o}return r(i)(n)}(r(f)(Error))})),o("ljZEh",(function(e,r){function n(t){return t instanceof Object&&"attributes"in t&&t.attributes instanceof Object&&"reason"in t.attributes&&t instanceof Error}function o(t){return n(t)?t.attributes.reason:"unknown"}t(e.exports,"isMediaClientError",(function(){return n})),t(e.exports,"getMediaClientErrorReason",(function(){return o}))})),o("8ICSu",(function(e,o){t(e.exports,"isRateLimitedError",(function(){return y})),t(e.exports,"createUrl",(function(){return w})),t(e.exports,"extendHeaders",(function(){return S})),t(e.exports,"createMapResponseToJson",(function(){return O})),t(e.exports,"createMapResponseToBlob",(function(){return _})),t(e.exports,"fetchRetry",(function(){return j})),t(e.exports,"createRequestErrorReason",(function(){return A})),t(e.exports,"createProcessFetchResponse",(function(){return P}));var i=n("4mVfk"),s=n("b4Ivn"),u=n("9q1kH"),c=n("kFnE9"),a=n("8DpVo");n("33HVa");var l=n("8EBFq"),f=n("i618E"),p=n("c8qg3");function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){r(c)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t){return new Promise((function(e){return setTimeout(e,t)}))}function b(t){return t instanceof TypeError}function y(t){return!!t&&(0,p.isRequestError)(t)&&429===t.attributes.statusCode||!!t&&!!t.message&&t.message.includes("429")}var m="x-b3-traceid",g="x-b3-spanid",x=function(t){var e;return t?(e={},r(c)(e,m,t.traceId),r(c)(e,g,t.spanId),e):{}};function w(t,e){var n=e.params,o=e.auth,i=new URL(t,null==o?void 0:o.baseUrl),c=o&&(0,f.mapAuthToQueryParameters)(o)||{},a=d(d({},n),c);return Object.entries(a).filter((function(t){var e=r(u)(t,2);e[0];return null!=e[1]})).forEach((function(t){var e;(e=i.searchParams).append.apply(e,r(s)(t))})),i.searchParams.sort(),i.toString()}function S(t,e,r){if(e||r||t)return d(d(d({},null!=t?t:{}),function(t){return t?(0,l.isClientBasedAuth)(t)?{"X-Client-Id":t.clientId,Authorization:"Bearer ".concat(t.token)}:{"X-Issuer":t.asapIssuer,Authorization:"Bearer ".concat(t.token)}:{}}(e)),x(r))}function O(t){return function(){var e=r(i)(r(a).mark((function e(n){return r(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.json();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new(0,p.RequestError)("serverInvalidBody",d(d(d({},t),I(n)),{},{statusCode:n.status}),e.t0 instanceof Error?e.t0:void 0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}function _(t){return function(){var e=r(i)(r(a).mark((function e(n){return r(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.blob();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new(0,p.RequestError)("serverInvalidBody",d(d(d({},t),I(n)),{},{statusCode:n.status}),e.t0 instanceof Error?e.t0:void 0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}var E={startTimeoutInMs:1e3,maxAttempts:5,factor:2};function k(t,e){var r=t.reason,n=t.metadata,o=t.innerError;return new(0,p.RequestError)(r,d(d({},n),e),o)}function j(t,e){return T.apply(this,arguments)}function T(){return T=r(i)(r(a).mark((function t(e,n){var o,s,u,c,l,f,h,y,m,g=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=g.length>2&&void 0!==g[2]?g[2]:{},s=d(d({},E),o),u=s.startTimeoutInMs,c=s.maxAttempts,l=s.factor,f=0,h=u,m=function(){var t=r(i)(r(a).mark((function t(){return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(h);case 2:h*=l,f+=1;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();case 6:if(!(f<c)){t.next=24;break}return t.prev=7,t.next=10,e();case 10:return t.abrupt("return",t.sent);case 13:if(t.prev=13,t.t0=t.catch(7),y=t.t0,!((x=t.t0)instanceof Error&&"request_cancelled"===x.message||x&&"AbortError"===x.name)){t.next=18;break}throw new(0,p.RequestError)("clientAbortedRequest",n,t.t0);case 18:if((b(t.t0)||(0,p.isRequestError)(t.t0))&&(!(0,p.isRequestError)(t.t0)||t.t0.metadata&&t.t0.metadata.statusCode&&!(t.t0.metadata.statusCode<500))){t.next=20;break}throw t.t0;case 20:return t.next=22,m();case 22:t.next=6;break;case 24:if(!(0,p.isRequestError)(y)){t.next=26;break}throw k(y,{attempts:f,clientExhaustedRetries:!0});case 26:throw new(0,p.RequestError)("serverUnexpectedError",d(d({},n),{},{attempts:f,clientExhaustedRetries:!0}),y);case 27:case"end":return t.stop()}var x}),t,null,[[7,13]])}))),T.apply(this,arguments)}function A(t){switch(t){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}function P(t){return function(e){if(e.ok||e.status<400)return e;var r=function(t,e){var r=e.status,n=A(r);return new(0,p.RequestError)(n,d(d(d({},t),I(e)),{},{statusCode:r}))}(t,e);throw r}}function I(t){var e=t.headers;return{mediaRegion:e.get("x-media-region")||"unknown",mediaEnv:e.get("x-media-env")||"unknown"}}})),o("i618E",(function(e,r){t(e.exports,"mapAuthToQueryParameters",(function(){return i})),n("33HVa");var o=n("8EBFq");function i(t){return(0,o.isClientBasedAuth)(t)?{client:t.clientId,token:t.token}:{issuer:t.asapIssuer,token:t.token}}})),o("h9bvE",(function(e,o){t(e.exports,"resolveAuth",(function(){return a})),t(e.exports,"resolveInitialAuth",(function(){return l}));var i=n("4mVfk"),s=n("8DpVo"),u=n("eFW2u"),c=n("cc41k"),a=function(){var t=r(i)(r(s).mark((function t(e,n){var o,i,a=arguments;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>2&&void 0!==a[2]?a[2]:1e4,t.prev=1,t.next=4,Promise.race([e(n),(0,c.rejectTimeout)(o,new(0,u.MediaStoreError)("authProviderTimedOut"))]);case 4:i=t.sent,t.next=12;break;case 7:if(t.prev=7,t.t0=t.catch(1),!(t.t0 instanceof u.MediaStoreError)){t.next=11;break}throw t.t0;case 11:throw new(0,u.MediaStoreError)("failedAuthProvider",t.t0 instanceof Error?t.t0:void 0);case 12:if(i){t.next=14;break}throw new(0,u.MediaStoreError)("emptyAuth");case 14:return t.abrupt("return",i);case 15:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,r){return t.apply(this,arguments)}}(),l=function(t){if(!t)throw new(0,u.MediaStoreError)("missingInitialAuth");return t}})),o("eFW2u",(function(e,o){t(e.exports,"MediaStoreError",(function(){return p})),t(e.exports,"isMediaStoreError",(function(){return h}));var i=n("uqRmf"),s=n("eVDe4"),u=n("3BD5g"),c=n("ck3YL"),a=n("lH0U2");function l(t){var e=f();return function(){var n,o=r(a)(t);if(e){var i=r(a)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(c)(this,n)}}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}var p=function(t){r(u)(n,t);var e=l(n);function n(t,o){var s;return r(i)(this,n),(s=e.call(this,t)).reason=t,s.innerError=o,s}return r(s)(n,[{key:"attributes",get:function(){return{reason:this.reason,innerError:this.innerError}}}]),n}(n("hUNpD").BaseMediaClientError);function h(t){return t instanceof p}})),o("cc41k",(function(e,r){t(e.exports,"rejectTimeout",(function(){return n}));var n=function(t,e){return new Promise((function(r,n){setTimeout(n,t,e)}))}})),o("6Oiyr",(function(e,o){t(e.exports,"FileFetcherImpl",(function(){return L})),t(e.exports,"FileFetcherError",(function(){return n("3j5fG").FileFetcherError}));var i=n("4mVfk"),s=n("uqRmf"),u=n("eVDe4"),c=n("kFnE9"),a=n("8DpVo"),l=n("lp7cl"),f=n("9mShp"),p=n("a8tNN");n("hdcxN"),n("33HVa");var h=n("8EBFq"),d=n("4jYvF"),v=n("k6Tu2"),b=n("n46Ic"),y=n("3j5fG"),m=n("gcsxb"),g=n("hLBmV"),x=n("kqqxO"),w=n("ddUsN"),S=n("txYsi"),O=n("adY6K"),_=n("fqV7n"),E=n("l0olW"),k=n("dXSNO"),j=n("hCJEG"),T=n("buMAy"),A=n("7sxCO"),P=n("6hpXS"),I=n("dfBCV"),F=n("aLpBG"),C=n("6SX3W"),M=n("7j4G4"),U=n("k3H8T");n("8SZxD");var R=n("fqIJk"),N=n("dEQSq");function B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){r(c)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.mediaStore;r(s)(this,t),r(c)(this,"getErrorFileState",(function(t,e,r){return"string"==typeof t?{status:"error",id:e,reason:t,occurrenceKey:r,message:t}:{status:"error",id:e,reason:null==t?void 0:t.reason,details:null==t?void 0:t.attributes,occurrenceKey:r,message:null==t?void 0:t.message}})),r(c)(this,"setFileState",(function(t,e){n.store.setState((function(r){r.files[t]=e}))})),r(c)(this,"createDownloadFileStream",(function(t,e,o){var s=(0,P.createMediaSubject)(),u=new(0,M.PollingFunction);return u.onError=function(t){return s.error(t)},u.execute(r(i)(r(a).mark((function i(){var c,l;return r(a).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.dataloader.load({id:t,collectionName:e});case 2:if(c=r.sent){r.next=5;break}throw new(0,y.FileFetcherError)("emptyItems",t,{collectionName:e,occurrenceKey:o});case 5:if(!(0,U.isEmptyFile)(c)){r.next=7;break}throw new(0,y.FileFetcherError)("zeroVersionFile",t,{collectionName:e,occurrenceKey:o});case 7:l=(0,b.mapMediaItemToFileState)(t,c),s.next(l),r.t0=l.status,r.next="processing"===r.t0?12:"processed"===r.t0?14:16;break;case 12:return u.next(),r.abrupt("break",16);case 14:return s.complete(),r.abrupt("break",16);case 16:case"end":return r.stop()}}),i)})))),s})),r(c)(this,"getUploadingFileStateBase",(function(t,e){"string"==typeof t.content&&(t.content=(0,k.convertBase64ToBlob)(t.content));var r,n=t.content,o=t.name,i=void 0===o?"":o,s=e.id,u=e.occurrenceKey,c=0,a="";return n instanceof Blob&&(c=n.size,a=n.type,((0,F.isMimeTypeSupportedByBrowser)(n.type)||(0,N.getBooleanFF)("platform.media-svg-rendering"))&&(r={value:n,origin:"local"})),{id:s,occurrenceKey:u,name:i,size:c,mediaType:(0,_.getMediaTypeFromUploadableFile)(t),mimeType:a,preview:r}})),this.mediaApi=e,this.store=o,this.dataloader=(0,O.createFileDataloader)(e)}var e,n,o;return r(u)(t,[{key:"getFileState",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.collectionName,i=n.occurrenceKey;if(!r(S)(t)){var s=(0,P.createMediaSubject)(),u=new(0,y.FileFetcherError)("invalidFileId",t,{collectionName:o,occurrenceKey:i}),c={status:"error",id:t,reason:null==u?void 0:u.reason,message:null==u?void 0:u.message,occurrenceKey:i,details:null==u?void 0:u.attributes};return s.error(u),this.setFileState(t,c),(0,j.fromObservable)(s)}return(0,j.fromObservable)((0,g.getFileStreamsCache)().getOrInsert(t,(function(){var r=e.createDownloadFileStream(t,o);return r.subscribe({next:function(r){e.setFileState(t,r)},error:function(r){var n=e.getErrorFileState(r,t,i);e.setFileState(t,n)}}),r})))}},{key:"getCurrentState",value:function(t,e){return(0,T.toPromise)(this.getFileState(t,e))}},{key:"getArtifactURL",value:function(t,e,r){return this.mediaApi.getArtifactURL(t,e,r)}},{key:"getFileBinaryURL",value:function(t,e,r){return this.mediaApi.getFileBinaryURL(t,e,r)}},{key:"touchFiles",value:function(t,e,r){return this.mediaApi.touchFiles({descriptors:t},{collection:e},r).then((function(t){return t.data}))}},{key:"generateUploadableFileUpfrontIds",value:function(t,e){var n=r(p)(),o=r(p)(),i={fileId:n,occurrenceKey:o,collection:t};return{id:n,occurrenceKey:o,deferredUploadId:this.touchFiles([i],t,e).then((function(t){return t.created[0].uploadId}))}}},{key:"uploadExternal",value:(o=r(i)(r(a).mark((function t(e,n,o){var s,u,c,l,f,p,h,d,v=this;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=this.generateUploadableFileUpfrontIds(n,o),u=s.id,c=s.occurrenceKey,l=(0,P.createMediaSubject)(),f=fetch(e).then((function(t){return t.blob()})).catch((function(){})),p=new Promise(function(){var t=r(i)(r(a).mark((function t(e,n){var o;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:(o=t.sent)||n("Could not fetch the blob"),e({value:o,origin:"remote"});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),h=e.split("/").pop()||"",d={status:"processing",name:h,size:0,mediaType:"unknown",mimeType:"",id:u,occurrenceKey:c,preview:p},l.next(d),(0,g.getFileStreamsCache)().set(u,l),this.setFileState(u,d),t.abrupt("return",new Promise(function(){var t=r(i)(r(a).mark((function t(e,i){var d,b,y,m,g,x;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:if(d=t.sent){t.next=5;break}return t.abrupt("return",i("Could not download remote file"));case 5:return b=d.type,y=d.size,m={content:d,mimeType:b,collection:n,name:h,size:y},g=(0,I.getMediaTypeFromMimeType)(b),l.next({status:"processing",name:h,size:y,mediaType:g,mimeType:b,id:u,occurrenceKey:c,preview:p}),v.upload(m,void 0,s,o),t.prev=10,t.next=13,(0,A.getDimensionsFromBlob)(g,d);case 13:x=t.sent,t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(10),i(t.t0),t.abrupt("return");case 20:e({dimensions:x,uploadableFileUpfrontIds:s});case 21:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(e,r){return t.apply(this,arguments)}}()));case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return o.apply(this,arguments)})},{key:"upload",value:function(t,e,r,n){var o=this,i=t.collection,s=r||this.generateUploadableFileUpfrontIds(i,n),u=s.id,c=s.occurrenceKey,a=this.getUploadingFileStateBase(t,s),p=(0,P.createMediaSubject)();(0,g.getFileStreamsCache)().set(u,p);var h=function(t){var e=D(D({status:"uploading"},a),{},{progress:t});p.next(e),o.setFileState(u,e)},d=new(0,l.Subscription),v=(0,m.uploadFile)(t,this.mediaApi,s,{onUploadFinish:function(t){if(t){var e=o.getErrorFileState(t,u,c);return o.setFileState(u,e),p.error(t)}d=o.createDownloadFileStream(u,i,c).pipe((0,f.map)((function(t){return D(D(D({},a),t),(0,E.overrideMediaTypeIfUnknown)(t,a.mediaType))}))).subscribe({next:function(t){p.next(t),o.setFileState(u,t)},error:function(t){var e=o.getErrorFileState(t,u,c);p.error(t),o.setFileState(u,e)},complete:p.complete})},onProgress:h},n).cancel;return null==e||e.setAbort((function(){v(),d.unsubscribe()})),setTimeout(h,0,0),(0,j.fromObservable)(p)}},{key:"downloadBinary",value:(n=r(i)(r(a).mark((function t(e){var n,o,i,s=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"download",o=s.length>2?s[2]:void 0,t.next=4,this.mediaApi.getFileBinaryURL(e,o);case 4:i=t.sent,(0,d.downloadUrl)(i,{name:n}),x.globalMediaEventEmitter.emit("media-viewed",{fileId:e,isUserCollection:o===w.RECENTS_COLLECTION,viewingLevel:"download"});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"copyFile",value:(e=r(i)(r(a).mark((function t(e,n){var o,i,s,u,c,l,f,p,d,y,m,x,w,S,O,_,k,j,T,A,F,M,U,R,N,B,L,q,V,z,G,H,X,K=this,J=arguments;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=J.length>2&&void 0!==J[2]?J[2]:{},i=J.length>3?J[3]:void 0,s=e.authProvider,u=e.collection,c=e.id,l=n.authProvider,f=n.collection,p=n.replaceFileId,d=n.occurrenceKey,y=o.preview,m=o.mimeType,x=n.mediaStore||new(0,v.MediaStore)({authProvider:l}),t.t0=h.authToOwner,t.next=9,s({collectionName:u});case 9:return t.t1=t.sent,w=(0,t.t0)(t.t1),S={sourceFile:{id:c,collection:u,owner:w}},O={collection:f,replaceFileId:p,occurrenceKey:d},_=(0,g.getFileStreamsCache)(),t.prev=14,t.next=17,x.copyFileWithToken(S,O,i);case 17:if(j=t.sent,T=j.data,A=D(D({},T),m?{mimeType:m}:void 0),F=A.id,M=A.mimeType,U=M?(0,I.getMediaTypeFromMimeType)(M):"unknown",R=(0,b.mapMediaFileToFileState)({data:A}),N=_.get(F),B=N||(0,P.createMediaSubject)(),L=!(0,b.isErrorFileState)(R)&&y?{preview:y}:{},t.t2=!(0,b.isFinalFileState)(R)&&M,!t.t2){t.next=31;break}return t.next=30,(0,C.shouldFetchRemoteFileStates)(U,M,y);case 30:t.t2=t.sent;case 31:if(!t.t2){t.next=38;break}q=D(D(D({},R),(0,E.overrideMediaTypeIfUnknown)(R,U)),L),B.next(q),this.setFileState(F,q),k=this.createDownloadFileStream(F,f,d).subscribe({next:function(t){var e=D(D(D({},t),(0,E.overrideMediaTypeIfUnknown)(t,U)),!(0,b.isErrorFileState)(t)&&L);return K.setFileState(F,e),B.next(e)},error:function(t){var e=K.getErrorFileState(t,c,d);return K.setFileState(F,e),B.error(t)},complete:function(){return B.complete()}}),t.next=39;break;case 38:(0,b.isProcessingFileState)(R)||(V=D(D({},R),!(0,b.isErrorFileState)(R)&&L),B.next(V),this.setFileState(F,V));case 39:return _.has(F)||(0,g.getFileStreamsCache)().set(F,B),t.abrupt("return",T);case 43:throw t.prev=43,t.t3=t.catch(14),k&&k.unsubscribe(),p&&(z=_.get(p),G=this.store.getState().files[p],z?z.error(t.t3):_.set(c,(0,P.createMediaSubject)(t.t3)),H=G?p:c,X=this.getErrorFileState(t.t3,c,d),this.setFileState(H,X)),t.t3;case 48:case"end":return t.stop()}}),t,this,[[14,43]])}))),function(t,r){return e.apply(this,arguments)})}]),t}()})),o("hdcxN",(function(t,r){var o=n("8ovux");!function(t,e){"use strict";if(!t.setImmediate){var r,n,i,s,u,c=1,a={},l=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){o.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(n=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",u=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),r=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return a[c]=o,r(c),c++},p.clearImmediate=h}function h(t){delete a[t]}function d(t){if(l)setTimeout(d,0,t);else{var r=a[t];if(r){l=!0;try{!function(t){var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(e,n)}}(r)}finally{h(t),l=!1}}}}}("undefined"==typeof self?void 0===e?t.exports:e:self)})),o("4jYvF",(function(e,r){t(e.exports,"downloadUrl",(function(){return n}));var n=function(t,e){var r=!!window.MSInputMethodContext&&!!document.documentMode,n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),o="media-download-iframe",i=document.createElement("a"),s=document.getElementById(o);s||((s=document.createElement("iframe")).style.display="none",s.id=o,s.name=o,document.body.appendChild(s)),i.href=t,e&&e.name&&(i.download=e.name),i.target=r||n?"_blank":o,document.body.appendChild(i),i.click(),document.body.removeChild(i)}})),o("n46Ic",(function(e,o){t(e.exports,"isUploadingFileState",(function(){return c})),t(e.exports,"isProcessingFileState",(function(){return a})),t(e.exports,"isProcessedFileState",(function(){return l})),t(e.exports,"isErrorFileState",(function(){return f})),t(e.exports,"isPreviewableFileState",(function(){return p})),t(e.exports,"isFinalFileState",(function(){return h})),t(e.exports,"isImageRepresentationReady",(function(){return d})),t(e.exports,"mapMediaFileToFileState",(function(){return v})),t(e.exports,"mapMediaItemToFileState",(function(){return b}));var i=n("kFnE9");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r(i)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=function(t){return"uploading"===t.status},a=function(t){return"processing"===t.status},l=function(t){return"processed"===t.status},f=function(t){return"error"===t.status},p=function(t){return!f(t)&&!!t.preview},h=function(t){return["processed","failed-processing","error"].includes(t.status)},d=function(t){switch(t.status){case"processing":case"processed":case"failed-processing":return!(!t.representations||!t.representations.image);default:return!1}},v=function(t){var e=t.data,r=e.id,n=e.name,o=e.size,i=e.processingStatus,s=e.artifacts,c={id:r,name:n,size:o,mediaType:e.mediaType,mimeType:e.mimeType,artifacts:s,representations:e.representations,createdAt:e.createdAt,metadataTraceContext:e.metadataTraceContext};switch(i){case"pending":case void 0:return u(u({},c),{},{status:"processing"});case"succeeded":return u(u({},c),{},{status:"processed"});case"failed":return u(u({},c),{},{status:"failed-processing"})}},b=function(t,e){return v({data:u({id:t},e)})}})),o("3j5fG",(function(e,o){t(e.exports,"FileFetcherError",(function(){return p}));var i=n("uqRmf"),s=n("eVDe4"),u=n("3BD5g"),c=n("ck3YL"),a=n("lH0U2");function l(t){var e=f();return function(){var n,o=r(a)(t);if(e){var i=r(a)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(c)(this,n)}}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}var p=function(t){r(u)(n,t);var e=l(n);function n(t,o,s){var u;return r(i)(this,n),(u=e.call(this,t)).reason=t,u.id=o,u.metadata=s,u}return r(s)(n,[{key:"attributes",get:function(){var t=this.reason,e=this.id,r=this.metadata,n=void 0===r?{}:r;return{reason:t,id:e,collectionName:n.collectionName,occurrenceKey:n.occurrenceKey}}}]),n}(n("hUNpD").BaseMediaClientError)})),o("gcsxb",(function(e,o){t(e.exports,"uploadFile",(function(){return m}));var i=n("4mVfk"),s=n("8DpVo"),u=n("76A0q"),c=n("aJVh7"),a=n("3puyE"),l=n("kSNdV"),f=n("ey7hl"),p=n("ddUsN"),h=n("79VEG"),d=function(){var t=r(i)(r(s).mark((function t(e,n){var o;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.createHasher)(n);case 2:return o=t.sent,t.abrupt("return",o.hash(e));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),v=function(t,e,n,o){return function(){var u=r(i)(r(s).mark((function i(u){return r(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.t1=u.hash,r.t2=u.blob,r.next=5,e;case 5:return r.t3=r.sent,r.t4=u.partNumber,r.t5=n,r.t6=o,r.next=11,r.t0.uploadChunk.call(r.t0,r.t1,r.t2,r.t3,r.t4,r.t5,r.t6);case 11:return r.abrupt("return",r.sent);case 12:case"end":return r.stop()}}),i)})));return function(t){return u.apply(this,arguments)}}()},b=function(t,e,n,o){var u=0;return function(){var c=r(i)(r(s).mark((function i(c){return r(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.next=3,e;case 3:return r.t1=r.sent,r.t2={chunks:g(c),offset:u},r.t3=n,r.t4=o,r.next=9,r.t0.appendChunksToUpload.call(r.t0,r.t1,r.t2,r.t3,r.t4);case 9:u+=c.length;case 10:case"end":return r.stop()}}),i)})));return function(t){return c.apply(this,arguments)}}()},y=function(){var t=r(i)(r(s).mark((function t(e,n,o,i,u){var c,a,l,f,p,h;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.collection,a=e.name,l=e.mimeType,f=o.id,p=o.occurrenceKey,h=e.size?{uploadId:i,name:a,mimeType:l,conditions:{size:e.size}}:{uploadId:i,name:a,mimeType:l},t.abrupt("return",n.createFileFromUpload(h,{occurrenceKey:p,collection:c,replaceFileId:f},u));case 4:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),m=function(t,e,r,n,o){var i=t.content,s=t.collection,l=r.deferredUploadId,m=r.id,g=r.occurrenceKey,x=p.CHUNK_SIZE;try{i instanceof Blob&&(x=(0,h.calculateChunkSize)(i.size))}catch(t){return t instanceof Error&&t.message===h.fileSizeError&&(null==n||n.onUploadFinish(new(0,f.UploaderError)(t.message,m,{collectionName:s,occurrenceKey:g}))),{cancel:function(){null==n||n.onUploadFinish("canceled")}}}var w=(0,u.chunkinator)(i,{hashingFunction:function(t){return d(t,e.chunkHashAlgorithm)},hashingConcurrency:5,chunkSize:x,uploadingConcurrency:3,uploadingFunction:v(e,l,s,o),processingBatchSize:p.PROCESSING_BATCH_SIZE,processingFunction:b(e,l,s,o)},{onProgress:function(t){n&&n.onProgress(t)}}),S=n&&n.onUploadFinish||function(){},O=(0,c.from)(l).pipe((0,a.concatMap)((function(n){return w.pipe((0,a.concatMap)((function(){return(0,c.from)(y(t,e,r,n,o))})))}))).subscribe({error:function(t){return S(t)},complete:function(){return S()}});return{cancel:function(){O.unsubscribe(),S("canceled")}}},g=function(t){return t.map((function(t){return t.hash}))}})),o("76A0q",(function(e,r){t(e.exports,"chunkinator",(function(){return d}));var o=n("4xMHR"),i=n("3puyE"),s=n("b3JGy"),u=n("lExtz"),c=n("4QCvs"),a=n("2aAnR"),l=n("haPan"),f=n("g4CuK"),p=n("kDrzb"),h=n("aJVh7"),d=function(t,e,r){return function(t,e,r){return(0,u.fromPromise)((0,p.fetchBlob)(t)).pipe((0,i.concatMap)((function(t){var n=e.chunkSize,u=r.onProgress,p=Math.ceil(t.size/n),d=(0,c.slicenator)(t,{size:n}),v=(0,a.hashinator)(d,{concurrency:e.hashingConcurrency,hasher:e.hashingFunction}),b=0,y=(0,l.uploadinator)(v,{concurrency:e.uploadingConcurrency,uploader:e.uploadingFunction});return u&&(y=y.pipe((0,o.tap)((function(){u((b+=1)/p)})))),(0,f.processinator)(y,{batchSize:e.processingBatchSize,processor:e.processingFunction}).pipe((0,i.concatMap)((function(t){return(0,h.from)(t)})),(0,s.bufferCount)(p))})))}(t,e,r)}})),o("b3JGy",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("2qwUA");t.exports.bufferCount=function(t,e){return void 0===e&&(e=null),function(r){return r.lift(new i(t,e))}};var i=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?u:s}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),s=function(t){function e(e,r){t.call(this,e),this.bufferSize=r,this.buffer=[]}return r(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(o.Subscriber),u=function(t){function e(e,r,n){t.call(this,e),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return r(e,t),e.prototype._next=function(t){var e=this,r=e.bufferSize,n=e.startBufferEvery,o=e.buffers,i=e.count;this.count++,i%n==0&&o.push([]);for(var s=o.length;s--;){var u=o[s];u.push(t),u.length===r&&(o.splice(s,1),this.destination.next(u))}},e.prototype._complete=function(){for(var e=this.buffers,r=this.destination;e.length>0;){var n=e.shift();n.length>0&&r.next(n)}t.prototype._complete.call(this)},e}(o.Subscriber)})),o("lExtz",(function(e,r){var o;t(e.exports,"fromPromise",(function(){return o}),(function(t){return o=t}));var i=n("bSUmI");o=i.PromiseObservable.create})),o("4QCvs",(function(e,r){t(e.exports,"slicenator",(function(){return s}));var o=n("aZJnX"),i=n("9mShp"),s=function(t,e){var r=e.size,n=Math.ceil(t.size/r);return(0,o.range)(0,n).pipe((0,i.map)((function(e){return{partNumber:e+1,blob:t.slice(e*r,(e+1)*r)}})))}})),o("aZJnX",(function(e,r){var o;t(e.exports,"range",(function(){return o}),(function(t){return o=t}));var i=n("5v3Xu");o=i.RangeObservable.create})),o("5v3Xu",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r,n){t.call(this),this.start=e,this._count=r,this.scheduler=n}return r(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),void 0===r&&(r=0),new e(t,r,n)},e.dispatch=function(t){var e=t.start,r=t.index,n=t.count,o=t.subscriber;r>=n?o.complete():(o.next(e),o.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=0,n=this.start,o=this._count,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:r,count:o,start:n,subscriber:t});for(;;){if(r++>=o){t.complete();break}if(t.next(n++),t.closed)break}},e}(n("gEhGF").Observable);t.exports.RangeObservable=o})),o("2aAnR",(function(e,r){t(e.exports,"hashinator",(function(){return i}));var o=n("kDrzb"),i=function(t,e){var r=e.hasher,n=e.concurrency;return(0,o.asyncMap)(function(t){return function(e){return t(e.blob).then((function(t){return{blob:e.blob,hash:"".concat(t,"-").concat(e.blob.size),partNumber:e.partNumber}}))}}(r),n)(t)}})),o("kDrzb",(function(e,o){t(e.exports,"fetchBlob",(function(){return a})),t(e.exports,"asyncMap",(function(){return f}));var i=n("4mVfk"),s=n("8DpVo"),u=n("gEhGF"),c=n("6YdGu");function a(t){return l.apply(this,arguments)}function l(){return(l=r(i)(r(s).mark((function t(e){return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=6;break}return t.next=3,fetch(e).then((function(t){return t.blob()}));case 3:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=function(t,e){return(0,c.mergeMap)(function(t){var e=new Array,r=function(){var t=e.findIndex((function(t){return!t.notifyIfReady()}));t>0&&e.splice(0,t)};return function(n){return new(0,u.Observable)((function(o){e.push(function(t,e,r){var n={notifyIfReady:function(){return!1}};return t.then((function(t){n.notifyIfReady=function(){return e.next(t),e.complete(),!0},r(n)}),(function(t){n.notifyIfReady=function(){return e.error(t),!0},r(n)})),n}(t(n),o,r))}))}}(t),e)}})),o("haPan",(function(e,r){t(e.exports,"uploadinator",(function(){return i}));var o=n("kDrzb"),i=function(t,e){return t.pipe((0,o.asyncMap)((function(t){return e.uploader(t).then((function(){return t}))}),e.concurrency))}})),o("g4CuK",(function(e,r){t(e.exports,"processinator",(function(){return s}));var o=n("b3JGy"),i=n("3puyE"),s=function(t,e){return t.pipe((0,o.bufferCount)(e.batchSize)).pipe((0,i.concatMap)((function(t){return e.processor?e.processor(t).then((function(){return t})):Promise.resolve(t)})))}})),o("kSNdV",(function(e,o){t(e.exports,"createHasher",(function(){return l}));var i=n("4mVfk"),s=n("8DpVo");n("33HVa");var u=n("bHXlK"),c=null,a=null,l=function(){var t=r(i)(r(s).mark((function t(e){var o,i,l,f,p,h,d;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=3,e!==u.ChunkHashAlgorithm.Sha256){t.next=11;break}if(a){t.next=8;break}return t.next=5,n("2Tg39");case 5:i=t.sent,l=i.SimpleHasher,a=new l;case 8:return t.abrupt("return",a);case 11:if(c){t.next=27;break}return t.prev=12,t.next=15,n("qrVcG");case 15:f=t.sent,p=f.WorkerHasher,c=new p(o),t.next=27;break;case 20:return t.prev=20,t.t0=t.catch(12),t.next=24,n("etr2q");case 24:h=t.sent,d=h.SimpleHasher,c=new d;case 27:return t.abrupt("return",c);case 28:case"end":return t.stop()}}),t,null,[[12,20]])})));return function(e){return t.apply(this,arguments)}}()})),o("2Tg39",(function(t,e){t.exports=n("3T95l")(n("7kEWw").resolve("jSJo0")).then((()=>n("8hp7p")))})),o("3T95l",(function(t,e){"use strict";var r=n("51a7t");t.exports=r((function(t){return new Promise((function(e,r){var n=document.getElementsByTagName("script");if([].concat(n).some((function(e){return e.src===t})))e();else{var o=document.createElement("link");o.href=t,o.rel="preload",o.as="script",document.head.appendChild(o);var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=t,i.onerror=function(e){var n=new TypeError("Failed to fetch dynamically imported module: ".concat(t,". Error: ").concat(e.message));i.onerror=i.onload=null,i.remove(),r(n)},i.onload=function(){i.onerror=i.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(i)}}))}))})),o("51a7t",(function(t,e){"use strict";var r={},n={},o={};t.exports=function(t,e){return function(i){var s=function(t){switch(t){case"preload":return n;case"prefetch":return o;default:return r}}(e);return s[i]?s[i]:s[i]=t.apply(null,arguments).catch((function(t){throw delete s[i],t}))}}})),o("7kEWw",(function(e,r){var n,o;t(e.exports,"register",(function(){return n}),(function(t){return n=t})),t(e.exports,"resolve",(function(){return o}),(function(t){return o=t}));var i=new Map;n=function(t,e){for(var r=0;r<e.length-1;r+=2)i.set(e[r],{baseUrl:t,path:e[r+1]})},o=function(t){var e=i.get(t);if(null==e)throw new Error("Could not resolve bundle with id "+t);return new URL(e.path,e.baseUrl).toString()}})),o("qrVcG",(function(t,e){t.exports=Promise.all([n("3T95l")(n("7kEWw").resolve("hln8V")),n("3T95l")(n("7kEWw").resolve("jW27w"))]).then((()=>n("gZPGa")))})),o("etr2q",(function(t,e){t.exports=Promise.all([n("3T95l")(n("7kEWw").resolve("hln8V")),n("3T95l")(n("7kEWw").resolve("lI1oq"))]).then((()=>n("7OJ2N")))})),o("ey7hl",(function(e,o){t(e.exports,"UploaderError",(function(){return p}));var i=n("uqRmf"),s=n("eVDe4"),u=n("3BD5g"),c=n("ck3YL"),a=n("lH0U2");function l(t){var e=f();return function(){var n,o=r(a)(t);if(e){var i=r(a)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(c)(this,n)}}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}var p=function(t){r(u)(n,t);var e=l(n);function n(t,o,s){var u;return r(i)(this,n),(u=e.call(this,t)).reason=t,u.id=o,u.metadata=s,u}return r(s)(n,[{key:"attributes",get:function(){var t=this.reason,e=this.id,r=this.metadata,n=void 0===r?{}:r;return{reason:t,id:e,collectionName:n.collectionName,occurrenceKey:n.occurrenceKey}}}]),n}(n("hUNpD").BaseMediaClientError)})),o("79VEG",(function(e,r){t(e.exports,"fileSizeError",(function(){return s})),t(e.exports,"calculateChunkSize",(function(){return u}));var o=n("bGg4k"),i=n("ddUsN"),s="fileSizeExceedsLimit",u=function(t){if(t>i.MAX_UPLOAD_FILE_SIZE)throw new Error(s);return t<=5*o.DATA_UNIT.GB?5*o.DATA_UNIT.MB:t>5*o.DATA_UNIT.GB&&t<=50*o.DATA_UNIT.GB?50*o.DATA_UNIT.MB:t>50*o.DATA_UNIT.GB&&t<=.95*o.DATA_UNIT.TB?100*o.DATA_UNIT.MB:210*o.DATA_UNIT.MB}})),o("hLBmV",(function(e,o){t(e.exports,"getFileStreamsCache",(function(){return a}));var i,s=n("uqRmf"),u=n("eVDe4"),c=function(){function t(e){r(s)(this,t),this.streams=e}return r(u)(t,[{key:"has",value:function(t){return!!this.streams.find(t)}},{key:"set",value:function(t,e){this.streams.set(t,e)}},{key:"get",value:function(t){return this.streams.get(t)}},{key:"getOrInsert",value:function(t,e){return this.has(t)||this.set(t,e()),this.get(t)}},{key:"removeAll",value:function(){this.streams.clear()}},{key:"remove",value:function(t){this.streams.delete(t)}},{key:"size",get:function(){return this.streams.size}}]),t}(),a=function(){if(!i){var t=n("fCU0m").mediaState;i=new c(t.streams)}return i}})),o("kqqxO",(function(e,r){t(e.exports,"globalMediaEventEmitter",(function(){return i})),n("33HVa");var o=n("fCU0m"),i={on:function(t,e){o.mediaState.eventEmitter&&o.mediaState.eventEmitter.on(t,e)},off:function(t,e){o.mediaState.eventEmitter&&o.mediaState.eventEmitter.off(t,e)},emit:function(t,e){if(o.mediaState.eventEmitter)return o.mediaState.eventEmitter.emit(t,e)}}})),o("txYsi",(function(t,e){for(var r=n("3LYhS").Buffer,o=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,i=[],s=0;s<256;s++)i[s]=(s+256).toString(16).substr(1);t.exports=function(t,e){var n,s,c,a,l;if(r.isBuffer(t))a=c||0,n=(l=i)[(s=t)[a++]]+l[s[a++]]+l[s[a++]]+l[s[a++]]+"-"+l[s[a++]]+l[s[a++]]+"-"+l[s[a++]]+l[s[a++]]+"-"+l[s[a++]]+l[s[a++]]+"-"+l[s[a++]]+l[s[a++]]+l[s[a++]]+l[s[a++]]+l[s[a++]]+l[s[a++]];else{if("[object String]"!==Object.prototype.toString.call(t))return!1;n=t}if(n=n.toLowerCase(),!o.test(n))return!1;if(void 0===e)e=u(n);else if(u(n)!==e)return!1;switch(e){case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(n.charAt(19));default:throw new Error("Invalid version provided.")}};var u=t.exports.version=function(t){return 0|t.charAt(14)}})),o("adY6K",(function(e,o){t(e.exports,"createFileDataloader",(function(){return b}));var i=n("b4Ivn"),s=n("4mVfk"),u=n("kFnE9"),c=n("8DpVo");n("hdcxN");var a=n("ht5OE"),l=n("hgzLj");function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){r(u)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h=100,d=function(t,e){return e?"".concat(t,"-").concat(e):t},v=function(t,e){var r=e.reduce((function(t,e){var r=e.id,n=e.collection;return t[d(r,n)]=e.error instanceof Error?e.error:p(p({},e.details),{},{metadataTraceContext:e.metadataTraceContext}),t}),{});return t.map((function(t){var e=t.id,n=t.collectionName,o=d(e,n);return r[o]||null}))};function b(t){return new(r(a))(function(t){return function(){var e=r(s)(r(c).mark((function e(n){var o,u,a;return r(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="__media-single-file-collection__",u=n.reduce((function(t,e){var r=e.collectionName||o,n=t[r]||[];return-1===n.indexOf(e.id)&&n.push(e.id),t[r]=n,t}),{}),a=[],e.next=5,Promise.all(Object.keys(u).map(function(){var e=r(s)(r(c).mark((function e(n){var s,f,h,d,v;return r(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={traceId:(0,l.getRandomHex)(8),spanId:(0,l.getRandomHex)(8)},f=u[n],h=n===o?void 0:n,e.prev=3,e.next=6,t.getItems(f,h,s);case 6:d=e.sent,v=d.data.items.map((function(t){return p(p({},t),{},{metadataTraceContext:s})})),a.push.apply(a,r(i)(v)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),f.forEach((function(t){a.push({id:t,collection:h,error:e.t0})}));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",v(n,a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t),{maxBatchSize:h})}})),o("fqV7n",(function(e,r){t(e.exports,"getMediaTypeFromUploadableFile",(function(){return i}));var o=n("dfBCV"),i=function(t){if(t.content instanceof Blob){var e=t.content.type;return(0,o.getMediaTypeFromMimeType)(e)}return"unknown"}})),o("l0olW",(function(e,r){t(e.exports,"overrideMediaTypeIfUnknown",(function(){return i}));var o=n("n46Ic"),i=function(t,e){return(0,o.isErrorFileState)(t)||"unknown"!==t.mediaType?{}:{mediaType:e}}})),o("dXSNO",(function(e,r){t(e.exports,"convertBase64ToBlob",(function(){return n}));var n=function(t){for(var e=t.split(",")[1],r=atob(e),n=[],o=function(){var t=r.slice(i,i+512),e=t.split("").map((function(e,r){return t.charCodeAt(r)})),o=new Uint8Array(e);n.push(o)},i=0;i<r.length;i+=512)o();return new Blob(n,{type:"image/jpeg"})}})),o("hCJEG",(function(e,r){t(e.exports,"fromObservable",(function(){return o}));n("6hpXS");function o(t){return{subscribe:function(e){var r=t.subscribe(e);return{unsubscribe:function(){r.unsubscribe()}}}}}})),o("6hpXS",(function(e,r){t(e.exports,"createMediaSubject",(function(){return i}));var o=n("jqvE9");function i(t){var e=new(0,o.ReplaySubject)(1);return t instanceof Error?e.error(t):t&&e.next(t),e}})),o("jqvE9",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("1oyUU"),i=n("3CTqq"),s=n("lp7cl"),u=n("77Svb"),c=n("j7a8D"),a=n("1vj28"),l=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=n,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=r<1?1:r}return r(e,t),e.prototype.next=function(e){var r=this._getNow();this._events.push(new f(r,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?e=s.Subscription.EMPTY:(this.observers.push(t),e=new a.SubjectSubscription(this,t)),n&&t.add(t=new u.ObserveOnSubscriber(t,n));for(var o=r.length,i=0;i<o&&!t.closed;i++)t.next(r[i].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||i.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,o=n.length,i=0;i<o&&!(t-n[i].time<r);)i++;return o>e&&(i=Math.max(i,o-e)),i>0&&n.splice(0,i),n},e}(o.Subject);t.exports.ReplaySubject=l;var f=function(t,e){this.time=t,this.value=e}})),o("3CTqq",(function(e,r){var o;t(e.exports,"queue",(function(){return o}),(function(t){return o=t}));var i=n("63GkG"),s=n("ltHwb");o=new s.QueueScheduler(i.QueueAction)})),o("63GkG",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r}return r(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(n("aiGI8").AsyncAction);t.exports.QueueAction=o})),o("ltHwb",(function(t,e){"use strict";var r=t.exports&&t.exports.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e}(n("f6KzA").AsyncScheduler);t.exports.QueueScheduler=o})),o("buMAy",(function(e,r){t(e.exports,"toPromise",(function(){return i}));var o=n("lp7cl"),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new(0,o.Subscription);return new Promise((function(r,n){return e.add(t.subscribe({next:function(t){r(t),e.unsubscribe()},error:function(t){n(t),e.unsubscribe()}}))}))}})),o("7sxCO",(function(e,o){t(e.exports,"getDimensionsFromBlob",(function(){return a}));var i=n("4mVfk"),s=n("8DpVo"),u=n("eGy62"),c=n("6O7zf"),a=function(){var t=r(i)(r(s).mark((function t(e,n){var o;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="image"===t.t0?3:"video"===t.t0?11:12;break;case 3:return o=URL.createObjectURL(n),t.prev=4,t.next=7,(0,u.getImageDimensionsFromBlob)(o);case 7:return t.abrupt("return",t.sent);case 8:return t.prev=8,URL.revokeObjectURL(o),t.finish(8);case 11:return t.abrupt("return",(0,c.getVideoDimensionsFromBlob)(n));case 12:throw new Error("Can't extract dimensions from ".concat(e));case 13:case"end":return t.stop()}}),t,null,[[4,,8,11]])})));return function(e,r){return t.apply(this,arguments)}}()})),o("eGy62",(function(e,r){t(e.exports,"getImageDimensionsFromBlob",(function(){return n}));var n=function(t){return new Promise((function(e,r){var n=new Image;n.src=t,n.onload=function(){return e({width:n.width,height:n.height})},n.onerror=r}))}})),o("6O7zf",(function(e,o){t(e.exports,"getVideoDimensionsFromBlob",(function(){return u}));var i=n("4mVfk"),s=n("8DpVo"),u=function(){var t=r(i)(r(s).mark((function t(e){return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var n=URL.createObjectURL(e),o=document.createElement("video");o.preload="metadata",o.src=n,o.muted=!0,o.addEventListener("loadedmetadata",(function e(){o.removeEventListener("loadedmetadata",e),t({width:o.videoWidth,height:o.videoHeight}),URL.revokeObjectURL(n)})),o.addEventListener("error",(function(){r(new Error("failed to load video")),URL.revokeObjectURL(n)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),o("6SX3W",(function(e,o){t(e.exports,"shouldFetchRemoteFileStates",(function(){return l}));var i=n("4mVfk"),s=n("8DpVo"),u=n("aLpBG"),c=n("35Pc4"),a=n("6O7zf");function l(t,e,r){return f.apply(this,arguments)}function f(){return(f=r(i)(r(s).mark((function t(e,n,o){var i,l,f,p;return r(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("doc"!==e&&(0,u.isMimeTypeSupportedByBrowser)(n)&&o||!(0,c.isMimeTypeSupportedByServer)(n)){t.next=2;break}return t.abrupt("return",!0);case 2:if("video"!==e||!o){t.next=20;break}return t.next=5,o;case 5:if((i=t.sent.value)instanceof Blob){t.next=8;break}return t.abrupt("return",!1);case 8:return t.prev=8,t.next=11,(0,a.getVideoDimensionsFromBlob)(i);case 11:return l=t.sent,f=l.width,p=l.height,t.abrupt("return",!f&&!p);case 17:return t.prev=17,t.t0=t.catch(8),t.abrupt("return",!0);case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[8,17]])})))).apply(this,arguments)}})),o("7j4G4",(function(e,o){t(e.exports,"PollingFunction",(function(){return d}));var i=n("4mVfk"),s=n("uqRmf"),u=n("eVDe4"),c=n("kFnE9"),a=n("8DpVo"),l=n("7idaV");function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){r(c)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5},d=function(){function t(e){r(s)(this,t),r(c)(this,"poll_intervalMs",0),r(c)(this,"attempt",1),r(c)(this,"shouldIterate",!0),r(c)(this,"timeoutId",0),this.options=p(p({},h),e),this.poll_intervalMs=this.options.poll_intervalMs}var e;return r(u)(t,[{key:"execute",value:(e=r(i)(r(a).mark((function t(e){var n,o=this;return r(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=this.options.poll_maxAttempts)){t.next=3;break}return t.abrupt("return",this.fail(new(0,l.PollingError)("pollingMaxAttemptsExceeded",this.attempt)));case 3:return t.prev=3,this.shouldIterate=!1,t.next=7,e();case 7:if(this.shouldIterate){t.next=9;break}return t.abrupt("return");case 9:if(!(this.attempt>=n)){t.next=11;break}return t.abrupt("return",this.fail(new(0,l.PollingError)("pollingMaxAttemptsExceeded",this.attempt)));case 11:this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((function(){return o.execute(e)}),this.poll_intervalMs),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),this.fail(t.t0);case 19:case"end":return t.stop()}}),t,this,[[3,16]])}))),function(t){return e.apply(this,arguments)})},{key:"fail",value:function(t){var e=this.onError;this.cancel(),e&&e(t)}},{key:"getIntervalMsForIteration",value:function(t){var e=this.options.poll_intervalMs;if(1===t)return e;for(var r=2;r<=t;r++)e*=this.options.poll_backoffFactor;return Math.min(Math.round(e),this.options.poll_maxIntervalMs)}},{key:"next",value:function(){this.shouldIterate=!0}},{key:"cancel",value:function(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}]),t}()})),o("7idaV",(function(e,o){t(e.exports,"PollingError",(function(){return p})),t(e.exports,"isPollingError",(function(){return h}));var i=n("uqRmf"),s=n("eVDe4"),u=n("3BD5g"),c=n("ck3YL"),a=n("lH0U2");function l(t){var e=f();return function(){var n,o=r(a)(t);if(e){var i=r(a)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(c)(this,n)}}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}var p=function(t){r(u)(n,t);var e=l(n);function n(t,o){var s;return r(i)(this,n),(s=e.call(this,t)).reason=t,s.attempts=o,s}return r(s)(n,[{key:"attributes",get:function(){return{reason:this.reason,attempts:this.attempts}}}]),n}(n("hUNpD").BaseMediaClientError);function h(t){return t instanceof p}})),o("k3H8T",(function(e,r){t(e.exports,"isEmptyFile",(function(){return o}));var n=432e5;function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),r=t.artifacts,o=t.mediaType,i=t.mimeType,s=t.name,u=t.processingStatus,c=t.representations,a=t.size,l=t.createdAt;if(!(r||o||i||s||u||c||a||"number"!=typeof l)&&e-l>n)return!0;return!1}})),o("8SZxD",(function(e,r){t(e.exports,"mediaStore",(function(){return n("fqIJk").mediaStore}));n("fqIJk")})),o("fqIJk",(function(e,r){t(e.exports,"mediaStore",(function(){return c}));n("kFnE9");var o=n("hGbdu"),i=n("4mveX"),s=n("enbJ9");var u=(0,s.createStore)()((0,o.subscribeWithSelector)((0,i.immer)((function(){return{files:{}}})))),c=((0,s.createStore)()((0,o.devtools)((0,o.subscribeWithSelector)((0,i.immer)((function(){return{files:{}}}))))),u)})),o("hGbdu",(function(e,r){var n,o;function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}function s(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}t(e.exports,"devtools",(function(){return n}),(function(t){return n=t})),t(e.exports,"subscribeWithSelector",(function(){return o}),(function(t){return o=t}));var u=function(t,e){return function(r,n,o){return o.dispatch=function(e){return r((function(r){return t(r,e)}),!1,e),e},o.dispatchFromDevtools=!0,i({dispatch:function(){var t;return(t=o).dispatch.apply(t,arguments)}},e)}},c=["enabled","anonymousActionType","store"],a=["connection"],l=new Map,f=function(t){var e=l.get(t);return e?Object.fromEntries(Object.entries(e.stores).map((function(t){return[t[0],t[1].getState()]}))):{}},p=function(t,e){return void 0===e&&(e={}),function(r,n,o){var u,p=e,d=p.enabled,v=p.anonymousActionType,b=p.store,y=s(p,c);try{u=null!=d&&d&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(t){}if(!u)return t(r,n,o);var m=function(t,e,r){if(void 0===t)return{type:"untracked",connection:e.connect(r)};var n=l.get(r.name);if(n)return i({type:"tracked",store:t},n);var o={connection:e.connect(r),stores:{}};return l.set(r.name,o),i({type:"tracked",store:t},o)}(b,u,y),g=m.connection,x=s(m,a),w=!0;o.setState=function(t,e,s){var u,c=r(t,e);if(!w)return c;var a=void 0===s?{type:v||"anonymous"}:"string"==typeof s?{type:s}:s;return void 0===b?(null==g||g.send(a,n()),c):(null==g||g.send(i({},a,{type:b+"/"+a.type}),i({},f(y.name),((u={})[b]=o.getState(),u))),c)};var S=function(){var t=w;w=!1,r.apply(void 0,arguments),w=t},O=t(o.setState,n,o);if("untracked"===x.type?null==g||g.init(O):(x.stores[x.store]=o,null==g||g.init(Object.fromEntries(Object.entries(x.stores).map((function(t){var e=t[0],r=t[1];return[e,e===x.store?O:r.getState()]}))))),o.dispatchFromDevtools&&"function"==typeof o.dispatch){var _=o.dispatch;o.dispatch=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];_.apply(void 0,e)}}return g.subscribe((function(t){switch(t.type){case"ACTION":return"string"!=typeof t.payload?void console.error("[zustand devtools middleware] Unsupported action format"):h(t.payload,(function(t){if("__setState"!==t.type)o.dispatchFromDevtools&&"function"==typeof o.dispatch&&o.dispatch(t);else{if(void 0===b)return void S(t.state);1!==Object.keys(t.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');var e=t.state[b];if(null==e)return;JSON.stringify(o.getState())!==JSON.stringify(e)&&S(e)}}));case"DISPATCH":switch(t.payload.type){case"RESET":return S(O),void 0===b?null==g?void 0:g.init(o.getState()):null==g?void 0:g.init(f(y.name));case"COMMIT":return void 0===b?void(null==g||g.init(o.getState())):null==g?void 0:g.init(f(y.name));case"ROLLBACK":return h(t.state,(function(t){if(void 0===b)return S(t),void(null==g||g.init(o.getState()));S(t[b]),null==g||g.init(f(y.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return h(t.state,(function(t){void 0!==b?JSON.stringify(o.getState())!==JSON.stringify(t[b])&&S(t[b]):S(t)}));case"IMPORT_STATE":var e,r=t.payload.nextLiftedState,n=null==(e=r.computedStates.slice(-1)[0])?void 0:e.state;if(!n)return;return S(void 0===b?n:n[b]),void(null==g||g.send(null,r));case"PAUSE_RECORDING":return w=!w}return}})),O}},h=function(t,e){var r;try{r=JSON.parse(t)}catch(t){console.error("[zustand devtools middleware] Could not parse the received json",t)}void 0!==r&&e(r)};function d(t,e){var r;try{r=t()}catch(t){return}return{getItem:function(t){var n,o=function(t){return null===t?null:JSON.parse(t,null==e?void 0:e.reviver)},i=null!=(n=r.getItem(t))?n:null;return i instanceof Promise?i.then(o):o(i)},setItem:function(t,n){return r.setItem(t,JSON.stringify(n,null==e?void 0:e.replacer))},removeItem:function(t){return r.removeItem(t)}}}var v=function t(e){return function(r){try{var n=e(r);return n instanceof Promise?n:{then:function(e){return t(e)(n)},catch:function(t){return this}}}catch(e){return{then:function(t){return this},catch:function(r){return t(r)(e)}}}}},b=function(t,e){return"getStorage"in e||"serialize"in e||"deserialize"in e?function(t,e){return function(r,n,o){var s,u=i({getStorage:function(){return localStorage},serialize:JSON.stringify,deserialize:JSON.parse,partialize:function(t){return t},version:0,merge:function(t,e){return i({},e,t)}},e),c=!1,a=new Set,l=new Set;try{s=u.getStorage()}catch(t){}if(!s)return t((function(){console.warn("[zustand persist middleware] Unable to update item '"+u.name+"', the given storage is currently unavailable."),r.apply(void 0,arguments)}),n,o);var f=v(u.serialize),p=function(){var t,e=u.partialize(i({},n())),r=f({state:e,version:u.version}).then((function(t){return s.setItem(u.name,t)})).catch((function(e){t=e}));if(t)throw t;return r},h=o.setState;o.setState=function(t,e){h(t,e),p()};var d,b=t((function(){r.apply(void 0,arguments),p()}),n,o),y=function(){if(s){c=!1,a.forEach((function(t){return t(n())}));var t=(null==u.onRehydrateStorage?void 0:u.onRehydrateStorage(n()))||void 0;return v(s.getItem.bind(s))(u.name).then((function(t){if(t)return u.deserialize(t)})).then((function(t){if(t){if("number"!=typeof t.version||t.version===u.version)return t.state;if(u.migrate)return u.migrate(t.state,t.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((function(t){var e;return d=u.merge(t,null!=(e=n())?e:b),r(d,!0),p()})).then((function(){null==t||t(d,void 0),c=!0,l.forEach((function(t){return t(d)}))})).catch((function(e){null==t||t(void 0,e)}))}};return o.persist={setOptions:function(t){u=i({},u,t),t.getStorage&&(s=t.getStorage())},clearStorage:function(){var t;null==(t=s)||t.removeItem(u.name)},getOptions:function(){return u},rehydrate:function(){return y()},hasHydrated:function(){return c},onHydrate:function(t){return a.add(t),function(){a.delete(t)}},onFinishHydration:function(t){return l.add(t),function(){l.delete(t)}}},y(),d||b}}(t,e):function(t,e){return function(r,n,o){var s=i({storage:d((function(){return localStorage})),partialize:function(t){return t},version:0,merge:function(t,e){return i({},e,t)}},e),u=!1,c=new Set,a=new Set,l=s.storage;if(!l)return t((function(){console.warn("[zustand persist middleware] Unable to update item '"+s.name+"', the given storage is currently unavailable."),r.apply(void 0,arguments)}),n,o);var f=function(){var t=s.partialize(i({},n()));return l.setItem(s.name,{state:t,version:s.version})},p=o.setState;o.setState=function(t,e){p(t,e),f()};var h,b=t((function(){r.apply(void 0,arguments),f()}),n,o),y=function(){var t;if(l){u=!1,c.forEach((function(t){var e;return t(null!=(e=n())?e:b)}));var e=(null==s.onRehydrateStorage?void 0:s.onRehydrateStorage(null!=(t=n())?t:b))||void 0;return v(l.getItem.bind(l))(s.name).then((function(t){if(t){if("number"!=typeof t.version||t.version===s.version)return t.state;if(s.migrate)return s.migrate(t.state,t.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((function(t){var e;return h=s.merge(t,null!=(e=n())?e:b),r(h,!0),f()})).then((function(){null==e||e(h,void 0),h=n(),u=!0,a.forEach((function(t){return t(h)}))})).catch((function(t){null==e||e(void 0,t)}))}};return o.persist={setOptions:function(t){s=i({},s,t),t.storage&&(l=t.storage)},clearStorage:function(){var t;null==(t=l)||t.removeItem(s.name)},getOptions:function(){return s},rehydrate:function(){return y()},hasHydrated:function(){return u},onHydrate:function(t){return c.add(t),function(){c.delete(t)}},onFinishHydration:function(t){return a.add(t),function(){a.delete(t)}}},s.skipHydration||y(),h||b}}(t,e)};n=p,o=function(t){return function(e,r,n){var o=n.subscribe;return n.subscribe=function(t,e,r){var i=t;if(e){var s=(null==r?void 0:r.equalityFn)||Object.is,u=t(n.getState());i=function(r){var n=t(r);if(!s(u,n)){var o=u;e(u=n,o)}},null!=r&&r.fireImmediately&&e(u,u)}return o(i)},t(e,r,n)}}})),o("4mveX",(function(e,r){var o;t(e.exports,"immer",(function(){return o}),(function(t){return o=t}));var i=n("biOIA"),s=function(t){return function(e,r,n){return n.setState=function(t,r){for(var n="function"==typeof t?i.produce(t):t,o=arguments.length,s=new Array(o>2?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];return e.apply(void 0,[n,r].concat(s))},t(n.setState,r,n)}};o=s})),o("biOIA",(function(e,r){function n(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(t){return!!t&&!!t[H]}function i(t){var e;return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===X}(t)||Array.isArray(t)||!!t[G]||!!(null===(e=t.constructor)||void 0===e?void 0:e[G])||p(t)||h(t))}function s(t,e,r){void 0===r&&(r=!1),0===u(t)?(r?Object.keys:K)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function u(t){var e=t[H];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:p(t)?2:h(t)?3:0}function c(t,e){return 2===u(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){return 2===u(t)?t.get(e):t[e]}function l(t,e,r){var n=u(t);2===n?t.set(e,r):3===n?t.add(r):t[e]=r}function f(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function p(t){return L&&t instanceof Map}function h(t){return q&&t instanceof Set}function d(t){return t.o||t.t}function v(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=J(t);delete e[H];for(var r=K(e),n=0;n<r.length;n++){var o=r[n],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function b(t,e){return void 0===e&&(e=!1),m(t)||o(t)||!i(t)||(u(t)>1&&(t.set=t.add=t.clear=t.delete=y),Object.freeze(t),e&&s(t,(function(t,e){return b(e,!0)}),!0)),t}function y(){n(2)}function m(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function g(t){var e=W[t];return e||n(18,t),e}function x(){return B}function w(t,e){e&&(g("Patches"),t.u=[],t.s=[],t.v=e)}function S(t){O(t),t.p.forEach(E),t.p=null}function O(t){t===B&&(B=t.l)}function _(t){return B={p:[],l:B,h:t,m:!0,_:0}}function E(t){var e=t[H];0===e.i||1===e.i?e.j():e.g=!0}function k(t,e){e._=e.p.length;var r=e.p[0],o=void 0!==t&&t!==r;return e.h.O||g("ES5").S(e,t,o),o?(r[H].P&&(S(e),n(4)),i(t)&&(t=j(e,t),e.l||A(e,t)),e.u&&g("Patches").M(r[H].t,t,e.u,e.s)):t=j(e,r,[]),S(e),e.u&&e.v(e.u,e.s),t!==z?t:void 0}function j(t,e,r){if(m(e))return e;var n=e[H];if(!n)return s(e,(function(o,i){return T(t,n,e,o,i,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return A(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=v(n.k):n.o,i=o,u=!1;3===n.i&&(i=new Set(o),o.clear(),u=!0),s(i,(function(e,i){return T(t,n,o,e,i,r,u)})),A(t,o,!1),r&&t.u&&g("Patches").N(n,r,t.u,t.s)}return n.o}function T(t,e,r,n,s,u,a){if(o(s)){var f=j(t,s,u&&e&&3!==e.i&&!c(e.R,n)?u.concat(n):void 0);if(l(r,n,f),!o(f))return;t.m=!1}else a&&r.add(s);if(i(s)&&!m(s)){if(!t.h.D&&t._<1)return;j(t,s),e&&e.A.l||A(t,s)}}function A(t,e,r){void 0===r&&(r=!1),!t.l&&t.h.D&&t.m&&b(e,r)}function P(t,e){var r=t[H];return(r?d(r):t)[e]}function I(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function F(t){t.P||(t.P=!0,t.l&&F(t.l))}function C(t){t.o||(t.o=v(t.t))}function M(t,e,r){var n=p(e)?g("MapSet").F(e,r):h(e)?g("MapSet").T(e,r):t.O?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:x(),P:!1,I:!1,R:{},l:e,t:t,k:null,o:null,j:null,C:!1},o=n,i=Y;r&&(o=[n],i=Z);var s=Proxy.revocable(o,i),u=s.revoke,c=s.proxy;return n.k=c,n.j=u,c}(e,r):g("ES5").J(e,r);return(r?r.A:x()).p.push(n),n}function U(t){return o(t)||n(22,t),function t(e){if(!i(e))return e;var r,n=e[H],o=u(e);if(n){if(!n.P&&(n.i<4||!g("ES5").K(n)))return n.t;n.I=!0,r=R(e,o),n.I=!1}else r=R(e,o);return s(r,(function(e,o){n&&a(n.t,e)===o||l(r,e,t(o))})),3===o?new Set(r):r}(t)}function R(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return v(t)}t(e.exports,"produce",(function(){return tt}));var N,B,D="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),L="undefined"!=typeof Map,q="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,z=D?Symbol.for("immer-nothing"):((N={})["immer-nothing"]=!0,N),G=D?Symbol.for("immer-draftable"):"__$immer_draftable",H=D?Symbol.for("immer-state"):"__$immer_state",X=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),K="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(t){var e={};return K(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},W={},Y={get:function(t,e){if(e===H)return t;var r=d(t);if(!c(r,e))return function(t,e,r){var n,o=I(e,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!i(n)?n:n===P(t.t,e)?(C(t),t.o[e]=M(t.A.h,n,t)):n},has:function(t,e){return e in d(t)},ownKeys:function(t){return Reflect.ownKeys(d(t))},set:function(t,e,r){var n=I(d(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var o=P(d(t),e),i=null==o?void 0:o[H];if(i&&i.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(f(r,o)&&(void 0!==r||c(t.t,e)))return!0;C(t),F(t)}return t.o[e]===r&&(void 0!==r||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return void 0!==P(t.t,e)||e in t.t?(t.R[e]=!1,C(t),F(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=d(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){n(12)}},Z={};s(Y,(function(t,e){Z[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Z.deleteProperty=function(t,e){return Z.set.call(this,t,e,void 0)},Z.set=function(t,e,r){return Y.set.call(this,t[0],e,r,t[0])};var Q=function(){function t(t){var e=this;this.O=V,this.D=!0,this.produce=function(t,r,o){if("function"==typeof t&&"function"!=typeof r){var s=r;r=t;var u=e;return function(t){var e=this;void 0===t&&(t=s);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return u.produce(t,(function(t){var n;return(n=r).call.apply(n,[e,t].concat(o))}))}}var c;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(t)){var a=_(e),l=M(e,t,void 0),f=!0;try{c=r(l),f=!1}finally{f?S(a):O(a)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(t){return w(a,o),k(t,a)}),(function(t){throw S(a),t})):(w(a,o),k(c,a))}if(!t||"object"!=typeof t){if(void 0===(c=r(t))&&(c=t),c===z&&(c=void 0),e.D&&b(c,!0),o){var p=[],h=[];g("Patches").M(t,c,p,h),o(p,h)}return c}n(21,t)},this.produceWithPatches=function(t,r){if("function"==typeof t)return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.produceWithPatches(r,(function(e){return t.apply(void 0,[e].concat(o))}))};var n,o,i=e.produce(t,r,(function(t,e){n=t,o=e}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return[t,n,o]})):[i,n,o]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){i(t)||n(8),o(t)&&(t=U(t));var e=_(this),r=M(this,t,void 0);return r[H].C=!0,O(e),r},e.finishDraft=function(t,e){var r=(t&&t[H]).A;return w(r,e),k(void 0,r)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!V&&n(20),this.O=t},e.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}r>-1&&(e=e.slice(r+1));var i=g("Patches").$;return o(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),$=new Q,tt=$.produce;$.produceWithPatches.bind($),$.setAutoFreeze.bind($),$.setUseProxies.bind($),$.applyPatches.bind($),$.createDraft.bind($),$.finishDraft.bind($)})),o("enbJ9",(function(t,e){"use strict";var r=function(t){var e,r=new Set,n=function(t,n){var o="function"==typeof t?t(e):t;if(!Object.is(o,e)){var i=e;e=(null!=n?n:"object"!=typeof o)?o:Object.assign({},e,o),r.forEach((function(t){return t(e,i)}))}},o=function(){return e},i={setState:n,getState:o,subscribe:function(t){return r.add(t),function(){return r.delete(t)}},destroy:function(){r.clear()}};return e=t(n,o,i),i},n=function(t){return t?r(t):r},o=function(t){return n(t)};t.exports.createStore=n,t.exports.default=o,t.exports=o,t.exports.createStore=n,t.exports.default=t.exports})),o("2Ij9u",(function(e,o){t(e.exports,"StargateClient",(function(){return a}));var i=n("4mVfk"),s=n("uqRmf"),u=n("eVDe4"),c=n("8DpVo"),a=function(){function t(e){r(s)(this,t),this.baseUrl=e||"/gateway/api"}var e;return r(u)(t,[{key:"fetchToken",value:(e=r(i)(r(c).mark((function t(e){return r(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.baseUrl,"/media/auth/smartedge"),{credentials:"include",headers:{"x-client-id":e}});case 2:return t.abrupt("return",t.sent.json());case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isTokenExpired",value:function(t){var e=(new Date).getTime()/1e3;return t.data.iat+t.data.expiresIn-e<0}}]),t}()})),o("c5RLY",(function(t,e){t.exports=Promise.all([n("3T95l")(n("7kEWw").resolve("4UrlV")),n("3T95l")(n("7kEWw").resolve("ihXqu"))]).then((()=>n("4EMAX")))}))}();
//# sourceMappingURL=esm.ebf1b211.js.map
